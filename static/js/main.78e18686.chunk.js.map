{"version":3,"sources":["img/barcode_how.png","panels/Home.js","panels/Card.js","img/barcode.svg","panels/AddCard.js","panels/Services.js","firebase_config.js","firebase.js","App.js","index.js","cards.js","prefs.js"],"names":["module","exports","Home","props","state","search","services","onChange","bind","this","setState","fetch","then","res","json","data","all","id","noShadow","vertical","value","theme","cards","length","style","height","icon","paddingTop","marginBottom","map","card","before","logo","type","src","process","background","bgColor","multiline","expandable","removable","key","onClick","goToPage","description","number","name","platform","ANDROID","float","className","size","toLowerCase","trim","searchTranslit","cyrillicToTranslit","transform","filter","indexOf","service","serviceId","React","Component","connect","osName","Card","useStoreon","dispatch","useState","snackbar","setSnackbar","args","closeDialog","goBack","left","IOS","vkconnect","send","text","toString","displayValue","fontSize","display","stretched","level","link","encodeURIComponent","console","log","marginRight","setPopout","actionsLayout","onClose","actions","title","false","action","goHome","autoclose","layout","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","x","y","width","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref","svgRef","viewBox","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","AddCard","onTooltipClose","tooltip","onDone","qr_data","error","onError","onScanClick","prop","prefs","setModal","activeModal","imgBarcode","caption","scan","sendPromise","catch","onAddClick","isValidName","isValidCard","uid","user","onChangeText","e","substring","replace","serviceid","decodeURIComponent","match","osname","marginTop","isShown","alignX","cornerOffset","offsetX","offsetY","paddingRight","autoFocus","status","placeholder","fill","disabled","Services","popular","cache","CellMeasurerCache","fixedWidth","defaultHeight","keyword","renderCard","index","parent","columnIndex","rowIndex","deferredMeasurementCache","rowHeight","rowRenderer","renderRow","rowCount","overscanRowCount","filtered","matchSearch","keywords","unshift","charAt","toUpperCase","slice","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","firebase_config","analytics","activePanel","setActivePanel","history","popout","modal","setUser","setError","poputRef","useRef","setPopoutInternal","a","window","pushState","push","current","pop","page","useEffect","addEventListener","preventDefault","authorise","response","auth","setPersistence","Auth","Persistence","LOCAL","signInWithCustomToken","token","onUser","hashParams","hash","split","queryParam","kvp","reduce","query","add_number","add_name","add_service_id","currentUser","onAuthStateChanged","subscribe","detail","firestore","terminate","isWebView","activeView","loading","justifyContent","alignItems","packageJson","version","onSwipeBack","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","store","createStore","on","cardsToSave","collection","where","onSnapshot","includeMetadataChanges","snapshot","get","docs","doc","docId","service_id","db","result","characters","charactersLength","Math","floor","random","makeid","add","delete","pref","persistState","location","ReactDOM","render","Provider","getElementById"],"mappings":"+FAAAA,EAAOC,QAAU,IAA0B,yC,+3DCarCC,G,kBAEL,WAAYC,GAAQ,IAAD,8BAClB,4CAAMA,KACDC,MAAQ,CAAEC,OAAQ,GAAIC,SAAU,IACrC,EAAKC,SAAW,EAAKA,SAASC,KAAd,gBAHE,E,sEAMVH,GAAUI,KAAKC,SAAS,CAAEL,a,0CAuBd,IAAD,OACnBM,MAAM,eACJC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAE,GAAI,OAAI,EAAKJ,SAAS,CAAEJ,SAAUQ,EAAKC,KAAKC,W,+BAG1C,IAAD,OAEPC,EACGR,KAAKN,MADRc,GAGD,OACC,kBAAC,IAAD,CAAOA,GAAIA,GACV,kBAAC,IAAD,CAAaC,UAAQ,GAArB,iEAEA,kBAAC,IAAD,CAAaC,SAAS,OAErB,kBAAC,IAAD,CAAQC,MAAOX,KAAKL,MAAMC,OAAQE,SAAUE,KAAKF,SAAUc,MAAM,aAK3C,IAAtBZ,KAAKa,MAAMC,QAA6C,IAA7Bd,KAAKL,MAAMC,OAAOkB,OAC5C,6BACC,yBAAKC,MAAO,CAAEC,OAAQ,MACtB,kBAAC,IAAD,CAECC,KAAM,kBAAC,IAAD,OAFP,4KAQuB,IAAtBjB,KAAKa,MAAMC,QACb,6BACC,yBAAKC,MAAO,CAAEC,OAAQ,MACtB,kBAAC,IAAD,CAECC,KAAM,kBAAC,IAAD,OAFP,8LAQH,kBAAC,IAAD,CAAMF,MAAO,CAAEG,WAAY,GAAIC,aAAc,KAE3CnB,KAAKa,MAAMO,KAAI,SAACC,GAAD,OAEb,kBAAC,IAAD,CACCC,OACsB,qBAAdD,EAAKE,MAAqC,MAAbF,EAAKE,KACxC,kBAAC,IAAD,CAAQC,KAAK,QAAQC,IAAKC,cAAyBL,EAAKE,KAAMR,MAAO,CAAEY,WAAYN,EAAKO,WAExF,kBAAC,IAAD,CAAQJ,KAAK,SAAS,kBAAC,IAAD,OAExBK,WAAS,EACTC,YAAU,EACVC,WAAW,EACXC,IAAKX,EAAKb,GACVyB,QAAS,kBAAM,EAAKvC,MAAMwC,SAAS,OAAQ,CAAE1B,GAAIa,EAAKb,MACtD2B,YAAad,EAAKe,QAEjBf,EAAKgB,UAMX,kBAAC,IAAD,CAAa3B,SAAS,UAEpB4B,gBAAeC,IACd,kBAAC,IAAD,CAAKxB,MAAO,CAAEyB,MAAO,UACpB,kBAAC,IAAD,CACCC,UAAU,oBACVR,QAAS,kBAAM,EAAKvC,MAAMwC,SAAS,cAEnC,kBAAC,IAAD,QAIF,kBAAC,IAAD,KACC,kBAAC,IAAD,CACCQ,KAAK,KACLT,QAAS,kBAAM,EAAKvC,MAAMwC,SAAS,cAFpC,uH,4BAtGM,IAAD,OACLrB,EAAQb,KAAKN,MAAMmB,MAAMP,KACzBV,EAASI,KAAKL,MAAMC,OAAO+C,cAAcC,OACzCC,EAAiBC,MAAqBC,UAAUnD,GAetD,OAdiBiB,EAAMmC,QAAO,YAAe,IAAZX,EAAW,EAAXA,KAChC,OAAOA,EAAKM,cAAcM,QAAQrD,IAAW,GAAKyC,EAAKM,cAAcM,QAAQJ,IAAmB,KAC9FzB,KAAI,SAACC,GACP,IAAM6B,EAAU,EAAKvD,MAAME,SAASmD,QAAO,YAC1C,OADsD,EAATxC,KAC/Ba,EAAK8B,aACjB,GACH,MAAQ,CACP3C,GAAIa,EAAKb,GACT6B,KAAMhB,EAAKgB,KACXD,OAAQf,EAAKe,OACbb,KAAiB,MAAX2B,EAAkBA,EAAQ3B,KAAO,KACvCK,QAAoB,MAAXsB,EAAkBA,EAAQtB,QAAU,a,GAzB9BwB,IAAMC,YA8HVC,MAAQ,QAAS7D,G,0GC3H1B8D,EAASjB,cAoGAkB,EAlGF,SAAA9D,GAAU,IAAD,EACO+D,IAAW,SAA/BC,EADa,EACbA,SAAU7C,EADG,EACHA,MADG,EAGW8C,mBAAS,MAHpB,mBAGdC,EAHc,KAGJC,EAHI,KAKfxC,EAAOR,EAAMP,KAAK0C,QAAO,SAAC3B,GAAD,OAAUA,EAAKb,KAAOd,EAAMoE,KAAKtD,MAAI,GAE9DuD,EAAc,WACnBrE,EAAMsE,UAqCP,OACC,kBAAC,IAAD,CAAOxD,GAAId,EAAMc,IAChB,kBAAC,IAAD,CACCyD,KAAM,kBAAC,IAAD,CAAchC,QAAS,kBAAMvC,EAAMsE,WACvCT,IAAWW,IAAM,kBAAC,IAAD,MAAwB,kBAAC,IAAD,QAI1B,qBAAT7C,EAAuBA,EAAKgB,KAAO,sBAM3B,qBAAThB,GACP,6BACC,kBAAC,IAAD,KAEC,yBAAKoB,UAAU,mBAAmBR,QAvBf,WACvB4B,GAAY,GACZM,IAAUC,KAAK,mBAAoB,CAAEC,KAAMhD,EAAKe,WAsB3C,yBAAKK,UAAU,WACd,kBAAC,IAAD,CAAS9B,MAAOU,EAAKe,OAAOkC,WAAYC,cAAc,EAAMC,SAAU,GAAIxD,OAAQ,SAMrF,kBAAC,IAAD,CAAQyB,UAAU,gBAAlB,yMAEA,kBAAC,IAAD,CAAK1B,MAAO,CAAE0D,QAAS,SACtB,kBAAC,IAAD,CAAQnD,OAAQ,kBAAC,IAAD,MAAiBoB,KAAK,IAAIgC,WAAS,EAACC,MAAM,YAAY1C,QAxC7D,WACb,IAAM2C,EAAO,sCAAwCC,mBAAmBxD,EAAKgB,MAAQ,mBAAqBhB,EAAK8B,UAAY,eAAiB9B,EAAKe,OACjJ0C,QAAQC,IAAIH,GACZT,IAAUC,KAAK,gBAAiB,CAAE,KAAQQ,KAqCgD7D,MAAO,CAAEiE,YAAa,IAA5G,gEACA,kBAAC,IAAD,CAAQ1D,OAAQ,kBAAC,IAAD,MAAkBoB,KAAK,IAAIgC,WAAS,EAACC,MAAM,cAAc1C,QAhErD,WACxBvC,EAAMuF,UAAU,kBAAC,IAAD,CACfC,cAAc,WACdC,QAASpB,EACTqB,QAAS,CAAC,CACTC,MAAO,6CACPC,OAAO,EACPvE,MAAO,cACPwE,OAAQ,WACP7F,EAAM8F,SACN9B,EAAS,mBAAoBrC,KAE5B,CACFgE,MAAO,uCACPI,WAAW,EACX1E,MAAO,YAGR,mJACA,8IAAyB,6BAAzB,6EAAiDM,EAAKgB,KAAtD,SA6CG,gDAKc,qBAAThB,GACP,kBAAC,IAAD,CACCJ,KAAM,kBAAC,IAAD,OADP,uNAMA2C,GAAY,kBAAC,IAAD,CACX8B,OAAO,WACPP,QAAS,kBAAMtB,GAAY,KAFhB,4KCzGhB,SAAS8B,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUlF,OAAQiF,IAAK,CAAE,IAAIE,EAASD,UAAUD,GAAI,IAAK,IAAI/D,KAAOiE,EAAcL,OAAOM,UAAUC,eAAeC,KAAKH,EAAQjE,KAAQ8D,EAAO9D,GAAOiE,EAAOjE,IAAY,OAAO8D,IAA2BO,MAAMrG,KAAMgG,WAEhT,SAASM,EAAyBL,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAAkEjE,EAAK+D,EAAnED,EAEzF,SAAuCG,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAA2DjE,EAAK+D,EAA5DD,EAAS,GAAQU,EAAaZ,OAAOa,KAAKR,GAAqB,IAAKF,EAAI,EAAGA,EAAIS,EAAW1F,OAAQiF,IAAO/D,EAAMwE,EAAWT,GAAQQ,EAAStD,QAAQjB,IAAQ,IAAa8D,EAAO9D,GAAOiE,EAAOjE,IAAQ,OAAO8D,EAFxMY,CAA8BT,EAAQM,GAAuB,GAAIX,OAAOe,sBAAuB,CAAE,IAAIC,EAAmBhB,OAAOe,sBAAsBV,GAAS,IAAKF,EAAI,EAAGA,EAAIa,EAAiB9F,OAAQiF,IAAO/D,EAAM4E,EAAiBb,GAAQQ,EAAStD,QAAQjB,IAAQ,GAAkB4D,OAAOM,UAAUW,qBAAqBT,KAAKH,EAAQjE,KAAgB8D,EAAO9D,GAAOiE,EAAOjE,IAAU,OAAO8D,EAMne,IAAI,EAEJ,IAAMgB,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFC,EAAG,iJAGD,EAEJ,IAAMD,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFC,EAAG,6JAGD,EAEJ,IAAMD,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFC,EAAG,uJAGD,EAEJ,IAAMD,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFC,EAAG,uJAGD,EAEJ,IAAMD,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,GACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,QAGN,EAEJ,IAAM8F,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,QAGNmG,GAEJ,IAAML,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,QAGNoG,GAEJ,IAAMN,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,QAGNqG,GAEJ,IAAMP,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,QAGNsG,GAEJ,IAAMR,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,QAGNuG,GAEJ,IAAMT,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,OAGNwG,GAEJ,IAAMV,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,OAGNyG,GAEJ,IAAMX,cAAc,IAAK,KAAM,IAAMA,cAAc,IAAK,KAAM,IAAMA,cAAc,OAAQ,CACxFE,EAAG,IACHC,EAAG,IACHC,MAAO,GACPlG,OAAQ,OAGN0G,GAEJ,IAAMZ,cAAc,IAAK,MAErBa,GAEJ,IAAMb,cAAc,IAAK,MAErBc,GAEJ,IAAMd,cAAc,IAAK,MAErBe,GAEJ,IAAMf,cAAc,IAAK,MAErBgB,GAEJ,IAAMhB,cAAc,IAAK,MAErBiB,GAEJ,IAAMjB,cAAc,IAAK,MAErBkB,GAEJ,IAAMlB,cAAc,IAAK,MAErBmB,GAEJ,IAAMnB,cAAc,IAAK,MAErBoB,GAEJ,IAAMpB,cAAc,IAAK,MAErBqB,GAEJ,IAAMrB,cAAc,IAAK,MAErBsB,GAEJ,IAAMtB,cAAc,IAAK,MAErBuB,GAEJ,IAAMvB,cAAc,IAAK,MAErBwB,GAEJ,IAAMxB,cAAc,IAAK,MAErByB,GAEJ,IAAMzB,cAAc,IAAK,MAErB0B,GAEJ,IAAM1B,cAAc,IAAK,MAErB,GAAa,SAAoB2B,GACnC,IAAIC,EAASD,EAAKC,OACdrD,EAAQoD,EAAKpD,MACb3F,EAAQ4G,EAAyBmC,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAM3B,cAAc,MAAOnB,EAAS,CACzCnF,GAAI,SACJwG,EAAG,MACHC,EAAG,MACH0B,QAAS,cACT5H,MAAO,CACL6H,iBAAkB,mBAEpBC,SAAU,WACVC,IAAKJ,GACJhJ,GAAQ2F,EAAQ,IAAMyB,cAAc,QAAS,KAAMzB,GAAS,KAAM,EAAO,EAAO,EAAO,EAAO,EAAO,EAAO8B,GAAOC,GAAOC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,KAGnRO,GAAa,IAAMC,YAAW,SAAUtJ,EAAOoJ,GACjD,OAAO,IAAMhC,cAAc,GAAYnB,EAAS,CAC9C+C,OAAQI,GACPpJ,O,IAEU,I,mBCpLTuJ,G,YAEF,WAAYvJ,GAAQ,IAAD,uBACf,4CAAMA,KAuBVwJ,eAAiB,WACb,EAAKxJ,MAAMgE,SAAS,YAAa,CAAE1B,IAAK,qBAAsBrB,OAAO,IACrE,EAAKV,SAAS,CAAEkJ,SAAS,KA1BV,EA6BnBC,OAAS,SAAC9I,GACN,EAAKL,SAAS,CAAEmC,OAAQ9B,EAAK+I,QAASC,OAAO,KA9B9B,EAiCnBC,QAAU,SAACD,KAjCQ,EAqCnBE,YAAc,SAACC,IAC+D,IAA/C,EAAK/J,MAAMgK,MAAX,wBAAuDpH,MAAa4B,IAE3F,EAAKxE,MAAMiK,SACP,kBAAC,IAAD,CAAWC,YAAY,SACnB,kBAAC,IAAD,CACIpJ,GAAG,QACH2E,QAAS,kBAAM,EAAKzF,MAAMiK,SAAS,OACnC1I,KAAM,kBAAC,IAAD,CAAQO,KAAK,MAAMC,IAAKoI,KAAYnH,KAAM,KAChD2C,MAAM,qSACNyE,QAAQ,+IACR1E,QAAS,CACL,CACIC,MAAO,iHACP7D,KAAM,YACN+D,OAAQ,WACJ,EAAK7F,MAAMgE,SAAS,YAAa,CAAE1B,IAAK,yBAA0BrB,OAAO,IACzE,EAAKjB,MAAMiK,SAAS,MACpB,EAAKI,KAAKN,KAGlB,CACIpE,MAAO,iCACP7D,KAAM,UACN+D,OAAQ,WACJ,EAAK7F,MAAMiK,SAAS,MACpB,EAAKI,KAAKN,UAQlC,EAAKM,KAAKN,IAvEC,EA2EnBM,KAAO,SAACN,GACJtF,IACK6F,YAAY,kBACZ7J,KAAK,EAAKiJ,QACVa,MAAM,EAAKV,UA/ED,EAkFnBW,WAAa,WAAO,IAAD,EAIX,EAAKvK,MAFL0C,EAFW,EAEXA,KACAD,EAHW,EAGXA,OAGJ,GAAI,EAAK+H,YAAY9H,IAAS,EAAK+H,YAAYhI,GAAS,CACpD,EAAKnC,SAAS,CAAEqJ,OAAO,IACvB,IAAMnG,EAAY,EAAKxD,MAAMwD,UACvBkH,EAAM,EAAK3K,MAAM4K,KAAKD,IAC5B,EAAK3K,MAAMgE,SAAS,gBAAiB,CAAE2G,MAAKhI,OAAMD,SAAQe,cAC1D,EAAKzD,MAAM8F,cAEX,EAAKvF,SAAS,CAAEqJ,OAAO,KA/FZ,EAmGnBiB,aAAe,SAACC,GAEZ,IAAMpI,EAASoI,EAAE1E,OAAOnF,MAAMiC,OAAO6H,UAAU,EAAG,IAAIC,QAAQ,gBAAiB,IAC/E,EAAKzK,SAAS,CAAEmC,SAAQkH,OAAQ,EAAKc,YAAYhI,MAnGjD,IAAIA,EAAS1C,EAAMoE,KAAK1B,QAAU,GAHnB,OAIf,EAAKzC,MAAQ,CACTwJ,SAA+C,IAAtCzJ,EAAMgK,MAAN,mBACTvG,UAAWzD,EAAMoE,KAAK6G,UACtBtI,KAAMuI,mBAAmBlL,EAAMoE,KAAKzB,MACpCD,OAAQA,EACRkH,OAAQ,EAAKc,YAAYhI,GACzBc,QAAS,MAVE,E,iFAcE,IAAD,OAChBhD,MAAM,eACDC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAE,GAAI,OAAI,EAAKJ,SAAS,CACxBiD,QAAS7C,EAAKC,KAAKC,IAAIyC,QAAO,YAC1B,OADsC,EAATxC,KACf,EAAKb,MAAMwD,aAC1B,U,kCAqFHd,GACR,MAAgB,KAATA,I,kCAGCD,GACR,OAAiB,MAAVA,GAAkBA,EAAOyI,MAAM,uB,+BAGhC,IAAD,OACCC,EAASxI,cAEf,OACI,kBAAC,IAAD,CAAO9B,GAAIR,KAAKN,MAAMc,IAClB,kBAAC,IAAD,CACIyD,KAAM,kBAAC,IAAD,CAAchC,QAAS,kBAAM,EAAKvC,MAAMsE,WACzC8G,IAAW5G,IAAM,kBAAC,IAAD,MAAwB,kBAAC,IAAD,QAFlD,iEAQA,kBAAC,IAAD,CACInD,MAAO,CAAEgK,UAAW,IACpBzJ,OAC0B,MAAtBtB,KAAKL,MAAMuD,SAA8C,MAA3BlD,KAAKL,MAAMuD,QAAQ3B,KAC7C,kBAAC,IAAD,CAAQC,KAAK,QAAQC,IAAKC,cAAyB1B,KAAKL,MAAMuD,QAAQ3B,KAAMR,MAAO,CAAEY,WAAY3B,KAAKL,MAAMuD,QAAQtB,WAEpH,kBAAC,IAAD,CAAQJ,KAAK,SAAS,kBAAC,IAAD,QAG7BxB,KAAKL,MAAM0C,MAGhB,kBAAC,IAAD,KACI,6BACI,kBAAC,IAAD,CAASgC,KAAK,+IACV2G,QAAShL,KAAKL,MAAMwJ,QACpB8B,OAAO,QACPC,cAAe,GACfC,SAAU,EACVC,QAAS,EACTjG,QAASnF,KAAKkJ,gBACd,kBAAC,IAAD,CACInI,MAAO,CAAEsK,aAAc,IACvBC,WAAS,EACTC,OAAO,UACPzL,SAAUE,KAAKuK,aACf5J,MAAOX,KAAKL,MAAMyC,OAClBZ,KAAK,OACLgK,YAAY,8GAGpB,kBAAC,GAAD,CAAavJ,QAASjC,KAAKwJ,YAAa/G,UAAU,OAAOyE,MAAO,GAAIlG,OAAQ,GAAIyK,KAAK,gCAI7F,kBAAC,IAAD,KACI,kBAAC,IAAD,CACIC,UAA+B,IAArB1L,KAAKL,MAAM2J,MACrB5G,KAAK,KACLT,QAAS,SAACuI,GAAD,OAAO,EAAKN,WAAWM,KAHpC,oD,GApKEpH,IAAMC,WAiLbC,OAAQ,QAAS,QAAS2F,I,SCnLnC6B,GAASxI,cAkKAqJ,G,YA9JX,WAAYjM,GAAQ,IAAD,8BACf,4CAAMA,KAEDC,MAAQ,CAAEC,OAAQ,GAAIC,SAAU,GAAI+L,QAAS,IAClD,EAAK9L,SAAW,EAAKA,SAASC,KAAd,gBAEhB,EAAK8L,MAAQ,IAAIC,KAAkB,CAC/BC,YAAY,EACZC,cAAe,MARJ,E,sEAYVpM,GACLI,KAAKC,SAAS,CAAEL,OAAQA,EAAO6K,UAAU,EAAG,Q,kCAGpCwB,EAASrM,GACjB,OAAOqM,EAAQtJ,cAAcM,QAAQrD,IAAW,I,0CA6B/B,IAAD,OAChBM,MAAM,eACDC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAE,GAAI,OACN,EAAKJ,SAAS,CACVJ,SAAUQ,EAAKC,KAAKC,IAAKqL,QAAS,Y,qCAKlC,IAAD,OACX,OACI,6BACI,kBAAC,IAAD,CAAQjH,MAAM,aAAd,gEACC3E,KAAKL,MAAMiM,QAAQxK,KAAI,SAAC8B,GAAD,OAAa,EAAKgJ,WAAWhJ,MACrD,kBAAC,IAAD,CAAQyB,MAAM,aAAd,yB,gCAKFwH,EAAOnK,EAAKjB,EAAOqL,GACzB,IAAI/K,EAAOrB,KAAKH,SAASsM,GACzB,OACI,kBAAC,KAAD,CACInK,IAAKA,EACL6J,MAAO7L,KAAK6L,MACZO,OAAQA,EACRC,YAAa,EACbC,SAAUH,GACV,yBAAKnK,IAAKA,EAAKjB,MAAOA,GAEjBf,KAAKkM,WAAW7K,O,iCAMtBA,GAAO,IAAD,OACb,OACI,kBAAC,IAAD,CACIC,OACyB,qBAAdD,EAAKE,MAAqC,MAAbF,EAAKE,KACrC,kBAAC,IAAD,CAAQC,KAAK,QAAQC,IAAKC,cAAyBL,EAAKE,KAAMR,MAAO,CAAEY,WAAYN,EAAKO,WAExF,kBAAC,IAAD,CAAQJ,KAAK,SAAS,kBAAC,IAAD,OAG9BM,YAAU,EACVC,WAAW,EACXC,IAAKX,EAAKb,GACVyB,QAAS,WACL,EAAKvC,MAAMwC,SAAS,MAAO,CAAEG,KAAMhB,EAAKgB,KAAMsI,UAAWtJ,EAAKb,OAGjEa,EAAKgB,Q,+BAKR,IAAD,OAED7B,EACAR,KAAKN,MADLc,GAGJ,OACI,kBAAC,IAAD,CAAOA,GAAIA,GAEP,kBAAC,IAAD,CACIyD,KAAM,kBAAC,IAAD,CAAchC,QAASjC,KAAKN,MAAMsE,QAAU8G,KAAW5G,IAAM,kBAAC,IAAD,MAAwB,kBAAC,IAAD,QAE3F,kBAAC,IAAD,CACItD,MAAM,SACNG,MAAO,CAAEsK,aAAcP,KAAW5G,IAAM,EAAI,IAC5CvD,MAAOX,KAAKL,MAAMC,OAClBE,SAAUE,KAAKF,SACfqF,QAASnF,KAAKN,MAAMsE,UAMO,IAA/BhE,KAAKL,MAAME,SAASiB,QACpB,kBAAC,IAAD,CAAS4B,KAAK,SAAS3B,MAAO,CAAEgK,UAAW,MAG/C,kBAAC,KAAD,MACK,gBAAG/J,EAAH,EAAGA,OAAQkG,EAAX,EAAWA,MAAX,OAGG,kBAAC,KAAD,CAEIA,MAAOA,EACPlG,OAAQA,EACRuL,yBAA0B,EAAKV,MAC/BW,UAAW,EAAKX,MAAMW,UACtBC,YAAa,gBAAGN,EAAH,EAAGA,MAAOnK,EAAV,EAAUA,IAAKjB,EAAf,EAAeA,MAAOqL,EAAtB,EAAsBA,OAAtB,OAAmC,EAAKM,UAAUP,EAAOnK,EAAKjB,EAAOqL,IAClFO,SAAU,EAAK9M,SAASiB,OACxB8L,iBAAkB,U,+BA3H1B,IAAD,OACLhN,EAASI,KAAKL,MAAMC,OAAO+C,cAAcC,OACzCC,EAAiBC,MAAqBC,UAAUnD,GAChDiN,EAAW7M,KAAKL,MAAME,SAASmD,QAAO,SAACE,GAEzC,OAAO,EAAK4J,YAAY5J,EAAQb,KAAMzC,IAAW,EAAKkN,YAAY5J,EAAQb,KAAMQ,IAAwC,MAApBK,EAAQ6J,UAAoB7J,EAAQ6J,SAAS/J,QAAO,SAACiJ,GACrJ,OAAO,EAAKa,YAAYb,EAASrM,IAAW,EAAKkN,YAAYb,EAASpJ,MACvE/B,OAAS,KACbM,KAAI,SAAC8B,GACJ,OAAOA,KAWX,OARItD,EAAOkB,OAAS,GAChB+L,EAASG,QAAQ,CACbxM,GAAI,KACJe,KAAM,KACNc,KAAMzC,IAIPiN,EAASzL,KAAI,SAAC8B,GAEjB,OADAA,EAAQb,KAAOa,EAAQb,KAAK4K,OAAO,GAAGC,cAAgBhK,EAAQb,KAAK8K,MAAM,GAClEjK,S,GA5CIE,IAAMC,W,qBCNd+J,GAVM,CACjBC,OAAQ,0CACRC,WAAY,mCACZC,YAAa,0CACbC,UAAW,mBACXC,cAAe,+BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gB,4BCAnBC,KAASC,cAAcC,IACvBF,KAASG,YAEMH,UAAf,E,UC+KevK,OAAQ,SA3KX,SAAC5D,GAAW,IAAD,EAEgBiE,mBAAS,CAAEtB,KAAM,OAAQyB,KAAM,KAF/C,mBAEfmK,EAFe,KAEFC,EAFE,OAIQvK,mBAAS,CAAC,CAAEtB,KAAM,OAAQyB,KAAM,MAJxC,mBAIfqK,EAJe,aAMMxK,mBAAS,OANf,mBAMfyK,EANe,KAMPnJ,EANO,OAOItB,mBAAS,MAPb,mBAOf0K,EAPe,KAOR1E,EAPQ,OAQEhG,mBAAS,MARX,mBAQf2G,EARe,KAQTgE,EARS,OASI3K,mBAAS,MATb,mBASf2F,EATe,KASRiF,EATQ,KAWhBC,EAAWC,iBAAOL,GAclBM,EAAiB,uCAAG,WAAON,GAAP,SAAAO,EAAA,sDACzB1J,EAAUmJ,GACVQ,OAAOT,QAAQU,UAAU,OAAQ,UACjCV,EAAQW,KAAK,CAAEzM,KAAM,SAAUyB,KAAM,KAHZ,2CAAH,sDAMjBE,EAAM,uCAAG,sBAAA2K,EAAA,sDACU,MAApBH,EAASO,SACZjK,QAAQC,IAAI,iBACZE,EAAU,MACVkJ,EAAQa,OACqB,IAAnBb,EAAQrN,QAClBgE,QAAQC,IAAI,SACZZ,IAAUC,KAAK,gBAAiB,CAAC,OAAU,aACjC+J,EAAQrN,OAAS,IAC3BgE,QAAQC,IAAI,OACZoJ,EAAQa,MACRd,EAAeC,EAAQA,EAAQrN,OAAS,IACxCgE,QAAQC,IAAI,kBAAoBoJ,EAAQA,EAAQrN,OAAS,GAAGuB,OAZ/C,2CAAH,qDAiBNmD,EAAM,uCAAG,sBAAAmJ,EAAA,sDACd1J,EAAU,MACVkJ,EAAQrN,OAAS,EACjBoB,EAAS,QAHK,2CAAH,qDAMNA,EAAQ,uCAAG,WAAO+M,EAAMnL,GAAb,SAAA6K,EAAA,sDAChBC,OAAOT,QAAQU,UAAU/K,EAAMmL,GAC/Bd,EAAQW,KAAK,CAAEzM,KAAM4M,EAAMnL,KAAMA,GAAQ,KACzCoK,EAAeC,EAAQA,EAAQrN,OAAS,IACxCgE,QAAQC,IAAI,kBAAoBoJ,EAAQA,EAAQrN,OAAS,GAAGuB,MAJ5C,2CAAH,wDA8Ed,OAvEA6M,qBAAU,WACTV,EAASO,QAAUX,IACjB,CAACA,IAGJc,qBAAU,WAETN,OAAOO,iBAAiB,YAAY,SAAA3E,GACnC1F,QAAQC,IAAI,gBACZyF,EAAE4E,iBACFpL,EAAOwG,MAGR,IAAM6E,EAAS,uCAAG,8BAAAV,EAAA,sEAEMzO,MAAM,iEAAmER,EAAME,QAFrF,cAEX0P,EAFW,gBAIEA,EAASjP,OAJX,cAIXA,EAJW,OAKjByE,QAAQC,IAAI,kBALK,SAQX8I,GAAS0B,OAAOC,eAAe3B,GAAS0B,KAAKE,KAAKC,YAAYC,OARnD,cAUjB7K,QAAQC,IAAI,yBAVK,UAWX8I,GAAS0B,OAAOK,sBAAsBvP,EAAKwP,OAXhC,4CAAH,qDAcTC,EAAS,SAAUxF,GAExBgE,EAAQhE,GAER5K,EAAMgE,SAAS,eAAgB,CAAE2G,IAAKC,EAAKD,MAE3C,IAAM0F,EAA8BrQ,EAAMsQ,KAhF7B7C,MAAM,GAAG8C,MAAM,KAC3B7O,KAAI,SAAC8O,GACL,IAAIC,EAAMD,EAAWD,MAAM,KAC3B,MAAO,CAAEjO,IAAKmO,EAAI,GAAIxP,MAAOwP,EAAI,OAEjCC,QAAO,SAACC,EAAOF,GAEf,OADAE,EAAMF,EAAInO,KAAOmO,EAAIxP,MACd0P,IACL,IAyE0B,MAAzBN,EAAWO,YAA6C,MAAvBP,EAAWQ,UAC/CrO,EAAS,MAAO,CAAEG,KAAM0N,EAAWQ,SAAUnO,OAAQ2N,EAAWO,WAAY3F,UAAWoF,EAAWS,kBAIjE,MAA/B3C,GAAS0B,OAAOkB,YACnBX,EAAOjC,GAAS0B,OAAOkB,aAEvB5C,GAAS0B,OAAOmB,oBAAmB,SAAUpG,GACxCA,EACHwF,EAAOxF,GAEP+E,IAAYpF,OAAM,SAACX,GAClBiF,EAASjF,GACTxE,QAAQC,IAAI,cAAgBuE,SAG5B,SAACA,GACHxE,QAAQC,IAAIuE,MAIdnF,IAAUwM,WAAU,SAACnG,GACpB,GAAsB,wBAAlBA,EAAEoG,OAAOpP,KAAgC,CAC5C,IAAI8I,EAAOuD,GAAS0B,OAAOkB,YACvBnG,GACHwF,EAAOxF,OAEoB,qBAAlBE,EAAEoG,OAAOpP,OACnBsD,QAAQC,IAAI,aACZ8I,GAASgD,YAAYC,kBAKrB,IAGF,kBAAC,IAAD,CAAgBC,WAAW,GAC1B,kBAAC,IAAD,CAAMC,WAAqB,MAAT1H,EAAgB,SAAkC,IAAxB5J,EAAMmB,MAAMoQ,QAAmB,SAAW,QACrF,kBAAC,IAAD,CAAMzQ,GAAG,SAASyN,YAAY,UAC7B,kBAAC,IAAD,CAAOzN,GAAG,UAET,yBAAKO,MAAO,CAAE0D,QAAS,OAAQyM,eAAgB,SAAUC,WAAY,SAAUnQ,OAAQ,SAEtF,kBAAC,IAAD,CAAS0B,KAAK,WAGf,kBAAC,IAAD,CAAahC,SAAS,UACrB,kBAAC,IAAD,CAAQ+B,UAAU,gBAAgB2O,GAAYC,YAKjD,kBAAC,IAAD,CAAM7Q,GAAG,QAAQyN,YAAY,SAC5B,kBAAC,IAAD,CAAOzN,GAAG,SACT,kBAAC,IAAD,sEACA,kBAAC,IAAD,CACCS,KAAM,kBAAC,IAAD,OADP,qMAOF,kBAAC,IAAD,CAAMT,GAAG,OAAOyN,YAAaA,EAAY5L,KAAM+L,OAAQA,EAAQC,MAAOA,EAAOiD,YAAatN,GACzF,kBAAC,EAAD,CAAMxD,GAAG,OAAO0B,SAAUA,EAAUoI,KAAMA,EAAMxG,KAAMmK,EAAYnK,OAClE,kBAAC,EAAD,CAAMtD,GAAG,OAAO0B,SAAUA,EAAU8B,OAAQA,EAAQwB,OAAQA,EAAQP,UAAWyJ,EAAmB5K,KAAMmK,EAAYnK,OACpH,kBAAC,GAAD,CAAUtD,GAAG,WAAW0B,SAAUA,EAAU8B,OAAQA,EAAQF,KAAMmK,EAAYnK,OAC9E,kBAAC,GAAD,CAAStD,GAAG,MAAM0B,SAAUA,EAAU8B,OAAQA,EAAQwB,OAAQA,EAAQ1B,KAAMmK,EAAYnK,KAAMwG,KAAMA,EAAMX,SAAUA,U,+DC/JzHrG,IAAQqN,WAAU,SAACnG,GAEf,OADA1F,QAAQC,IAAIyF,EAAEoG,OAAOpP,MACbgJ,EAAEoG,OAAOpP,MACb,IAAK,uBACD,IAAI+P,EAAkBC,SAASC,gBAAgB,UAC/CF,EAAgB5Q,MAAQ6J,EAAEoG,OAAOtQ,KAAKoR,OAASlH,EAAEoG,OAAOtQ,KAAKoR,OAAS,eACtEF,SAASG,KAAKC,WAAWC,aAAaN,GACtC,MACJ,QACIzM,QAAQC,IAAIyF,EAAEoG,OAAOpP,MACrBsD,QAAQC,IAAIyF,EAAEoG,OAAOtQ,UAKjCgD,IAAQc,KAAK,gBAEb,IAAM0N,GAAQC,KAAY,CCjCX,SAAAD,GAEXA,EAAME,GAAG,SAAS,iBAAO,CAAEnR,MAAO,CAAEoQ,SAAS,EAAM3Q,KAAM,QAEzDwR,EAAME,GAAG,cAAc,cAAiC,IAA9BnR,EAA6B,EAA7BA,MAAWoR,EAAkB,EAAlBA,YAIjC,OAHApR,EAAMP,KAAO2R,EACbpR,EAAMoQ,SAAU,EAChBnM,QAAQC,IAAI,gBACL,CAAElE,MAAOA,MAGpBiR,EAAME,GAAG,gBAAgB,cAAwB,EAArBnR,MAAsB,IAAXwJ,EAAU,EAAVA,IACxBwD,GAASgD,YACjBqB,WAAW,SAASC,MAAM,MAAO,KAAM9H,GACrC+H,WAAW,CAAEC,wBAAwB,IAAQ,SAAUC,GACpDxN,QAAQC,IAAIuN,GACZR,EAAMpO,SAAS,gBAAiB2G,SAI5CyH,EAAME,GAAG,iBAAiB,WAAY3H,GAAQ,EAAjBxJ,MACdgN,GAASgD,YACjBqB,WAAW,SAASC,MAAM,MAAO,KAAM9H,GAAKkI,MAAMpS,MAAK,SAACmS,GACvD,IAAML,EAAcK,EAASE,KAAKpR,KAAI,SAACqR,GACnC,MAAO,CACHC,MAAOD,EAAIjS,GACX6J,IAAKoI,EAAInS,OAAO+J,IAChB7J,GAAIiS,EAAInS,OAAOE,GACf6B,KAAMoQ,EAAInS,OAAO+B,KACjBD,OAAQqQ,EAAInS,OAAO8B,OACnBe,UAAWsP,EAAInS,OAAOqS,eAG9Bb,EAAMpO,SAAS,aAAc,CAAEuO,mBAChChI,OAAM,SAACX,GACNxE,QAAQC,IAAI,iCAAiCuE,SAKrDwI,EAAME,GAAG,iBAAiB,WAAY3Q,GAAS,EAAlBR,MAAmB,IACtC+R,EAAK/E,GAASgD,YACpBxP,EAAKb,GAeT,SAAgBM,GAIZ,IAHA,IAAI+R,EAAS,GACTC,EAAa,iEACbC,EAAmBD,EAAWhS,OACzBiF,EAAI,EAAGA,EAAIjF,EAAQiF,IACxB8M,GAAUC,EAAW7F,OAAO+F,KAAKC,MAAMD,KAAKE,SAAWH,IAE3D,OAAOF,EAtBGM,CAAO,IACjBP,EAAGV,WAAW,SAASkB,IAAI,CACvB/I,IAAKhJ,EAAKgJ,IACV7J,GAAIa,EAAKb,GACT6B,KAAMhB,EAAKgB,KACXD,OAAQf,EAAKe,OACbuQ,WAAYtR,EAAK8B,eAIzB2O,EAAME,GAAG,oBAAoB,WAAY3Q,GAAS,EAAlBR,MACjBgN,GAASgD,YACjBqB,WAAW,SAASO,IAAIpR,EAAKqR,OAAOW,aCzDhC,SAAA3J,GACXA,EAAMsI,GAAG,SAAS,iBAAO,CAAEtI,MAAO,OAElCA,EAAMsI,GAAG,aAAa,WAAYsB,GAAU,IAAnB5J,EAAkB,EAAlBA,MAGrB,OADAA,EAAM4J,EAAKtR,KAAOsR,EAAK3S,MAChB+I,MF8B0B6J,KAAa,CAAC,YAEjD3T,GAASgP,OAAO4E,SAAS5T,OACzBoQ,GAAOpB,OAAO4E,SAASxD,KAE7ByD,IAASC,OAAO,kBAAC,KAAaC,SAAd,CAAuBhT,MAAOmR,IAAO,kBAAC,GAAD,CAAKlS,OAAQA,GAAQoQ,KAAMA,MAAkCwB,SAASoC,eAAe,U","file":"static/js/main.78e18686.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/barcode_how.f8d6a335.png\";","import React from 'react';\n\nimport { Panel, FixedLayout, Div, Button, platform, ANDROID, List, Cell, PanelHeader, Search, Avatar, Placeholder } from\n\t'@vkontakte/vkui'\nimport Icon24Add from '@vkontakte/icons/dist/24/add'\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\nimport connect from 'storeon/react/connect'\nimport cyrillicToTranslit from 'cyrillic-to-translit-js'\n\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\n\nimport './Cards.css';\n\nclass Home extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { search: '', services: [] };\n\t\tthis.onChange = this.onChange.bind(this);\n\t}\n\n\tonChange(search) { this.setState({ search }); }\n\n\tget cards() {\n\t\tconst cards = this.props.cards.data;\n\t\tconst search = this.state.search.toLowerCase().trim();\n\t\tconst searchTranslit = cyrillicToTranslit().transform(search);\n\t\tconst filtered = cards.filter(({ name }) => {\n\t\t\treturn name.toLowerCase().indexOf(search) > -1 || name.toLowerCase().indexOf(searchTranslit) > -1;;\n\t\t}).map((card) => {\n\t\t\tconst service = this.state.services.filter(({ id }) => {\n\t\t\t\treturn id === card.serviceId\n\t\t\t})[0];\n\t\t\treturn ({\n\t\t\t\tid: card.id,\n\t\t\t\tname: card.name,\n\t\t\t\tnumber: card.number,\n\t\t\t\tlogo: service != null ? service.logo : null,\n\t\t\t\tbgColor: service != null ? service.bgColor : null\n\t\t\t})\n\t\t});\n\t\treturn filtered;\n\t}\n\n\tcomponentDidMount() {\n\t\tfetch(`./data.json`)\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => this.setState({ services: json.data.all }));\n\t}\n\n\trender() {\n\t\tlet {\n\t\t\tid,\n\t\t} = this.props\n\n\t\treturn (\n\t\t\t<Panel id={id}>\n\t\t\t\t<PanelHeader noShadow>Бонус карты</PanelHeader>\n\n\t\t\t\t<FixedLayout vertical='top'>\n\n\t\t\t\t\t<Search value={this.state.search} onChange={this.onChange} theme=\"default\" />\n\n\t\t\t\t</FixedLayout>\n\n\t\t\t\t{\n\t\t\t\t\tthis.cards.length === 0 && this.state.search.length === 0 ?\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ height: 52 }} />\n\t\t\t\t\t\t\t<Placeholder\n\n\t\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\n\t\t\t\t\t\t\t\tВы не добавили ни одной карточки\n\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t: this.cards.length === 0 &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ height: 52 }} />\n\t\t\t\t\t\t\t<Placeholder\n\n\t\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\t\t\tПо Вашему запросу ничего не найдено\n\t\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\t<List style={{ paddingTop: 60, marginBottom: 60 }}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.cards.map((card) =>\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tbefore={\n\t\t\t\t\t\t\t\t\t\ttypeof card.logo !== 'undefined' && card.logo != null ?\n\t\t\t\t\t\t\t\t\t\t\t<Avatar type=\"image\" src={process.env.PUBLIC_URL + card.logo} style={{ background: card.bgColor }} />\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<Avatar type=\"image\" ><Icon28Money /></Avatar>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\texpandable\n\t\t\t\t\t\t\t\t\tremovable={false}\n\t\t\t\t\t\t\t\t\tkey={card.id}\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.goToPage('card', { id: card.id })}\n\t\t\t\t\t\t\t\t\tdescription={card.number}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{card.name}\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</List>\n\n\t\t\t\t<FixedLayout vertical='bottom'>\n\t\t\t\t\t{\n\t\t\t\t\t\tplatform() === ANDROID ?\n\t\t\t\t\t\t\t<Div style={{ float: 'right' }}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName='FixedBottomButton'\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.goToPage('services')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon24Add />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.goToPage('services')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tДобавить новую карту\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t}\n\t\t\t\t</FixedLayout>\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n\nexport default connect('cards', Home)\n","import React, { useState } from 'react';\n\nimport { platform, IOS, Group, Panel, Div, Button, PanelHeader, HeaderButton, Alert, Footer, Snackbar, Placeholder } from '@vkontakte/vkui';\n\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Delete from '@vkontakte/icons/dist/24/delete'\nimport Icon24Share from '@vkontakte/icons/dist/24/share'\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\n\nimport './Cards.css';\nimport Barcode from 'react-barcode'\nimport useStoreon from 'storeon/react'\n\nimport vkconnect from '@vkontakte/vk-connect';\n\nconst osName = platform();\n\nconst Card = props => {\n\tconst { dispatch, cards } = useStoreon('cards')\n\n\tconst [snackbar, setSnackbar] = useState(null);\n\n\tconst card = cards.data.filter((card) => card.id === props.args.id)[0]\n\n\tconst closeDialog = () => {\n\t\tprops.goBack()\n\t}\n\n\tconst showDeleteDialog = () => {\n\t\tprops.setPopout(<Alert\n\t\t\tactionsLayout=\"vertical\"\n\t\t\tonClose={closeDialog}\n\t\t\tactions={[{\n\t\t\t\ttitle: 'Удалить',\n\t\t\t\tfalse: true,\n\t\t\t\tstyle: 'destructive',\n\t\t\t\taction: () => {\n\t\t\t\t\tprops.goHome()\n\t\t\t\t\tdispatch('cards/api/delete', card)\n\t\t\t\t},\n\t\t\t}, {\n\t\t\t\ttitle: 'Отмена',\n\t\t\t\tautoclose: true,\n\t\t\t\tstyle: 'cancel',\n\t\t\t}]}\n\t\t>\n\t\t\t<h2>Подтвердите действие</h2>\n\t\t\t<p>Вы уверены, что хотите<br></br>удалить карту {card.name}?</p>\n\t\t</Alert>)\n\t}\n\n\tconst share = () => {\n\t\tconst link = 'https://vk.com/app7225850#add_name=' + encodeURIComponent(card.name) + '&add_service_id=' + card.serviceId + '&add_number=' + card.number;\n\t\tconsole.log(link)\n\t\tvkconnect.send(\"VKWebAppShare\", { \"link\": link });\n\t}\n\n\tconst copyToClipboard = () => {\n\t\tsetSnackbar(true)\n\t\tvkconnect.send(\"VKWebAppCopyText\", { text: card.number });\n\t}\n\n\treturn (\n\t\t<Panel id={props.id}>\n\t\t\t<PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={() => props.goBack()} >\n\t\t\t\t\t{osName === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\n\t\t\t\t</HeaderButton>}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\ttypeof card !== 'undefined' ? card.name : \"Упс\"\n\t\t\t\t}\n\n\t\t\t</PanelHeader>\n\n\t\t\t{\n\t\t\t\ttypeof card !== 'undefined' &&\n\t\t\t\t<div>\n\t\t\t\t\t<Group >\n\n\t\t\t\t\t\t<div className=\"BarcodeContainer\" onClick={copyToClipboard} >\n\t\t\t\t\t\t\t<div className=\"Barcode\">\n\t\t\t\t\t\t\t\t<Barcode value={card.number.toString()} displayValue={true} fontSize={25} height={120} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</Group>\n\n\t\t\t\t\t<Footer className=\"unselectable\">Предъявите этот код на кассе магазина</Footer>\n\n\t\t\t\t\t<Div style={{ display: 'flex' }}>\n\t\t\t\t\t\t<Button before={<Icon24Share />} size=\"l\" stretched level=\"secondary\" onClick={share} style={{ marginRight: 8 }}>Поделиться</Button>\n\t\t\t\t\t\t<Button before={<Icon24Delete />} size=\"l\" stretched level=\"destructive\" onClick={showDeleteDialog}>Удалить</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{\n\t\t\t\ttypeof card === 'undefined' &&\n\t\t\t\t<Placeholder\n\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\tТакой карточки нет, либо она была удалена\n\t\t\t\t</Placeholder>\n\t\t\t}\n\t\t\t{\n\t\t\t\tsnackbar && <Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => setSnackbar(false)}\n\t\t\t\t>\n\t\t\t\t\tНомер скопирован в буфер обмена\n\t  \t\t\t</Snackbar>\n\t\t\t}\n\t\t</Panel>\n\t);\n}\n\nexport default Card;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M80,48H16C7.168,48,0,55.168,0,64v64c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V80h48c8.832,0,16-7.168,16-16 C96,55.168,88.832,48,80,48z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M464,336c-8.832,0-16,7.168-16,16v48h-48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h64c8.832,0,16-7.168,16-16v-64 C480,343.168,472.832,336,464,336z\"\n})));\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M464,48h-64c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h48v48c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V64 C480,55.168,472.832,48,464,48z\"\n})));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M80,400H32v-48c0-8.832-7.168-16-16-16c-8.832,0-16,7.168-16,16v64c0,8.832,7.168,16,16,16h64c8.832,0,16-7.168,16-16 C96,407.168,88.832,400,80,400z\"\n})));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 64,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 128,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 192,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 256,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 320,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 384,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 128,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 192,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 320,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref18 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref19 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref20 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref21 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref22 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref23 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref24 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref25 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref26 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref27 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref28 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref29 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgBarcode = function SvgBarcode(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 480 480\",\n    style: {\n      enableBackground: \"new 0 0 480 480\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBarcode, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/barcode.6d6249dd.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\n\nimport { Panel, PanelHeader, FormLayout, Input, Button, Div, platform, IOS, HeaderButton, Cell, Avatar, Tooltip, ModalCard, ModalRoot } from '@vkontakte/vkui'\n\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\nimport vkconnect from '@vkontakte/vk-connect';\n\nimport connect from 'storeon/react/connect'\n\nimport { ReactComponent as IconBarcode } from '../img/barcode.svg';\nimport imgBarcode from '../img/barcode_how.png';\n\nimport './Cards.css';\n\nclass AddCard extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        let number = props.args.number || '';\n        this.state = {\n            tooltip: props.prefs[\"scan_tooltip_shown\"] !== true,\n            serviceId: props.args.serviceid,\n            name: decodeURIComponent(props.args.name),\n            number: number,\n            error: !this.isValidCard(number),\n            service: null\n        };\n    }\n\n    componentDidMount() {\n        fetch(`./data.json`)\n            .then(res => res.json())\n            .then(json => this.setState({\n                service: json.data.all.filter(({ id }) => {\n                    return id === this.state.serviceId\n                })[0]\n            }));\n    }\n\n    onTooltipClose = () => {\n        this.props.dispatch('prefs/set', { key: \"scan_tooltip_shown\", value: true })\n        this.setState({ tooltip: false })\n    }\n\n    onDone = (data) => {\n        this.setState({ number: data.qr_data, error: false })\n    }\n\n    onError = (error) => {\n        //TODO show error\n    }\n\n    onScanClick = (prop) => {\n        const showScanIosTooltip = this.props.prefs[\"scan_ios_tooltip_shown\"] !== true && platform === IOS\n        if (showScanIosTooltip) {\n            this.props.setModal(\n                <ModalRoot activeModal=\"modal\">\n                    <ModalCard\n                        id=\"modal\"\n                        onClose={() => this.props.setModal(null)}\n                        icon={<Avatar type=\"app\" src={imgBarcode} size={72} />}\n                        title=\"Чтобы отсканировать, наведите код на нижнюю часть рамки\"\n                        caption=\"Найдите хорошее освещение\"\n                        actions={[\n                            {\n                                title: 'Больше не показывать',\n                                type: 'secondary',\n                                action: () => {\n                                    this.props.dispatch('prefs/set', { key: \"scan_ios_tooltip_shown\", value: true })\n                                    this.props.setModal(null);\n                                    this.scan(prop);\n                                }\n                            },\n                            {\n                                title: 'Понял',\n                                type: 'primary',\n                                action: () => {\n                                    this.props.setModal(null);\n                                    this.scan(prop);\n                                }\n                            }\n\n                        ]}\n                    />\n                </ModalRoot>)\n        } else {\n            this.scan(prop);\n        }\n    }\n\n    scan = (prop) => {\n        vkconnect\n            .sendPromise('VKWebAppOpenQR')\n            .then(this.onDone)\n            .catch(this.onError);\n    }\n\n    onAddClick = () => {\n        let {\n            name,\n            number\n        } = this.state\n\n        if (this.isValidName(name) && this.isValidCard(number)) {\n            this.setState({ error: false })\n            const serviceId = this.state.serviceId;\n            const uid = this.props.user.uid;\n            this.props.dispatch('cards/api/add', { uid, name, number, serviceId })\n            this.props.goHome();\n        } else {\n            this.setState({ error: true })\n        }\n    }\n\n    onChangeText = (e) => {\n        // eslint-disable-next-line\n        const number = e.target.value.trim().substring(0, 24).replace(/[^\\x00-\\x7F]/g, \"\")\n        this.setState({ number, error: !this.isValidCard(number) })\n    }\n\n    isValidName(name) {\n        return name !== '';\n    }\n\n    isValidCard(number) {\n        return number != null && number.match(\"^[\\x00-\\x7F]{6,24}$\");\n    }\n\n    render() {\n        const osname = platform()\n\n        return (\n            <Panel id={this.props.id}>\n                <PanelHeader\n                    left={<HeaderButton onClick={() => this.props.goBack()} >\n                        {osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\n                    </HeaderButton>}\n                >\n                    Новая карта\n                </PanelHeader>\n\n                <Cell\n                    style={{ marginTop: 10 }}\n                    before={\n                        this.state.service != null && this.state.service.logo != null ?\n                            <Avatar type=\"image\" src={process.env.PUBLIC_URL + this.state.service.logo} style={{ background: this.state.service.bgColor }} />\n                            :\n                            <Avatar type=\"image\" ><Icon28Money /></Avatar>\n                    }\n                >\n                    {this.state.name}\n                </Cell>\n\n                <FormLayout>\n                    <div >\n                        <Tooltip text=\"Карту можно отсканировать\"\n                            isShown={this.state.tooltip}\n                            alignX=\"right\"\n                            cornerOffset={-10}\n                            offsetX={-5}\n                            offsetY={5}\n                            onClose={this.onTooltipClose}>\n                            <Input\n                                style={{ paddingRight: 56 }}\n                                autoFocus\n                                status='default'\n                                onChange={this.onChangeText}\n                                value={this.state.number}\n                                type=\"text\"\n                                placeholder='Введите номер карты' />\n                        </Tooltip>\n\n                        <IconBarcode onClick={this.onScanClick} className=\"Scan\" width={30} height={30} fill=\"var(--control_foreground)\" />\n                    </div>\n                </FormLayout>\n\n                <Div>\n                    <Button\n                        disabled={this.state.error === true}\n                        size='xl'\n                        onClick={(e) => this.onAddClick(e)}>\n                        Создать\n                    </Button>\n                </Div>\n\n            </Panel>\n        );\n    }\n}\n\nexport default connect('cards', \"prefs\", AddCard)","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, HeaderButton, IOS, platform, Cell, PanelHeader, Search, Avatar, Spinner, Header } from\n    '@vkontakte/vkui'\n\nimport { List as Virtualized, AutoSizer, CellMeasurer, CellMeasurerCache } from \"react-virtualized\";\n\nimport cyrillicToTranslit from 'cyrillic-to-translit-js'\nimport Icon24Back from '@vkontakte/icons/dist/24/back'\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back'\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\n\nimport './Cards.css';\n\nconst osname = platform();\n\nclass Services extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { search: '', services: [], popular: [] };\n        this.onChange = this.onChange.bind(this);\n\n        this.cache = new CellMeasurerCache({\n            fixedWidth: true,\n            defaultHeight: 100\n        });\n    }\n\n    onChange(search) {\n        this.setState({ search: search.substring(0, 40) });\n    }\n\n    matchSearch(keyword, search) {\n        return keyword.toLowerCase().indexOf(search) > -1;\n    }\n\n    get services() {\n        const search = this.state.search.toLowerCase().trim();\n        const searchTranslit = cyrillicToTranslit().transform(search);\n        const filtered = this.state.services.filter((service) => {\n\n            return this.matchSearch(service.name, search) || this.matchSearch(service.name, searchTranslit) || (service.keywords != null && service.keywords.filter((keyword) => {\n                return this.matchSearch(keyword, search) || this.matchSearch(keyword, searchTranslit)\n            }).length > 0);\n        }).map((service) => {\n            return service\n        });\n\n        if (search.length > 0) {\n            filtered.unshift({\n                id: null,\n                logo: null,\n                name: search\n            });\n        }\n\n        return filtered.map((service) => {\n            service.name = service.name.charAt(0).toUpperCase() + service.name.slice(1);\n            return service\n        });\n    }\n\n    componentDidMount() {\n        fetch(`./data.json`)\n            .then(res => res.json())\n            .then(json =>\n                this.setState({\n                    services: json.data.all, popular: null\n                })\n            );\n    }\n\n    renderHeader() {\n        return (\n            <div>\n                <Header level=\"secondary\">Популярное</Header>\n                {this.state.popular.map((service) => this.renderCard(service))}\n                <Header level=\"secondary\">Все</Header>\n            </div>\n        )\n    }\n\n    renderRow(index, key, style, parent) {\n        var card = this.services[index];\n        return (\n            <CellMeasurer\n                key={key}\n                cache={this.cache}\n                parent={parent}\n                columnIndex={0}\n                rowIndex={index}>\n                <div key={key} style={style} >\n                    {/* {index === 0 && this.state.search.length == 0 && this.renderHeader()} */}\n                    {this.renderCard(card)}\n                </div>\n            </CellMeasurer>\n        )\n    }\n\n    renderCard(card) {\n        return (\n            <Cell\n                before={\n                    typeof card.logo !== 'undefined' && card.logo != null ?\n                        <Avatar type=\"image\" src={process.env.PUBLIC_URL + card.logo} style={{ background: card.bgColor }} />\n                        :\n                        <Avatar type=\"image\" ><Icon28Money /></Avatar>\n                }\n\n                expandable\n                removable={false}\n                key={card.id}\n                onClick={() => {\n                    this.props.goToPage('add', { name: card.name, serviceid: card.id })\n                }}\n            >\n                {card.name}\n            </Cell>\n        )\n    }\n\n    render() {\n        let {\n            id,\n        } = this.props\n\n        return (\n            <Panel id={id}>\n\n                <PanelHeader\n                    left={<HeaderButton onClick={this.props.goBack} >{osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}</HeaderButton>}\n                >\n                    <Search\n                        theme=\"header\"\n                        style={{ paddingRight: osname === IOS ? 0 : 56 }}\n                        value={this.state.search}\n                        onChange={this.onChange}\n                        onClose={this.props.goBack}\n                    />\n\n                </PanelHeader>\n\n                {\n                    this.state.services.length === 0 &&\n                    <Spinner size=\"medium\" style={{ marginTop: 20 }} />\n                }\n\n                <AutoSizer>\n                    {({ height, width }) => (\n\n\n                        <Virtualized\n\n                            width={width}\n                            height={height}\n                            deferredMeasurementCache={this.cache}\n                            rowHeight={this.cache.rowHeight}\n                            rowRenderer={({ index, key, style, parent }) => this.renderRow(index, key, style, parent)}\n                            rowCount={this.services.length}\n                            overscanRowCount={3} >\n\n                        </Virtualized>\n                    )}\n                </AutoSizer>\n            </Panel>\n        );\n    }\n}\n\nServices.propTypes = {\n    id: PropTypes.string.isRequired,\n\n};\n\nexport default Services","var firebaseConfig = {\n    apiKey: \"AIzaSyCfEuUvuiEzVpUHg46vyWGPSISl4iyb2Mg\",\n    authDomain: \"bonuscards-42f7a.firebaseapp.com\",\n    databaseURL: \"https://bonuscards-42f7a.firebaseio.com\",\n    projectId: \"bonuscards-42f7a\",\n    storageBucket: \"bonuscards-42f7a.appspot.com\",\n    messagingSenderId: \"774318858298\",\n    appId: \"1:774318858298:web:0dc82b27bebdd8f1849503\",\n    measurementId: \"G-HS7VBZ98KJ\"\n}\nexport default firebaseConfig","import firebase from 'firebase/app';\nimport firebase_config from './firebase_config';\n\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/analytics';\nimport 'firebase/firestore';\n\nfirebase.initializeApp(firebase_config);\nfirebase.analytics();\n\nexport default firebase","import React, { useState, useEffect, useRef } from 'react';\nimport connect from 'storeon/react/connect'\n\nimport { View, Root, Panel, Spinner, Footer, FixedLayout, Placeholder, PanelHeader, ConfigProvider } from '@vkontakte/vkui'\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './panels/Home';\nimport Card from './panels/Card';\nimport vkconnect from '@vkontakte/vk-connect';\nimport AddCard from './panels/AddCard';\nimport Services from './panels/Services';\nimport firebase from './firebase'\n\nimport packageJson from './package.alias.json';\n\nconst App = (props) => {\n\n\tconst [activePanel, setActivePanel] = useState({ name: \"home\", args: {} });\n\t// eslint-disable-next-line\n\tconst [history, setHistory] = useState([{ name: \"home\", args: {} }]);\n\n\tconst [popout, setPopout] = useState(null);\n\tconst [modal, setModal] = useState(null);\n\tconst [user, setUser] = useState(null);\n\tconst [error, setError] = useState(null);\n\n\tconst poputRef = useRef(popout);\n\n\tconst parseQueryString = (string) => {\n\t\treturn string.slice(1).split('&')\n\t\t\t.map((queryParam) => {\n\t\t\t\tlet kvp = queryParam.split('=');\n\t\t\t\treturn { key: kvp[0], value: kvp[1] }\n\t\t\t})\n\t\t\t.reduce((query, kvp) => {\n\t\t\t\tquery[kvp.key] = kvp.value;\n\t\t\t\treturn query\n\t\t\t}, {})\n\t};\n\n\tconst setPopoutInternal = async (popout) => {\n\t\tsetPopout(popout)\n\t\twindow.history.pushState(\"args\", \"popout\")\n\t\thistory.push({ name: \"popout\", args: {} })\n\t}\n\n\tconst goBack = async () => {\n\t\tif (poputRef.current != null) {\n\t\t\tconsole.log(\"REMOVE POPOUT\")\n\t\t\tsetPopout(null)\n\t\t\thistory.pop()\n\t\t} else if (history.length === 1) {\n\t\t\tconsole.log(\"CLOSE\")\n\t\t\tvkconnect.send(\"VKWebAppClose\", {\"status\": \"success\" });\n\t\t} else if (history.length > 1) {\n\t\t\tconsole.log(\"POP\")\n\t\t\thistory.pop()\n\t\t\tsetActivePanel(history[history.length - 1])\n\t\t\tconsole.log(\"setActivePanel:\" + history[history.length - 1].name)\n\t\t}\n\t}\n\n\n\tconst goHome = async () => {\n\t\tsetPopout(null)\n\t\thistory.length = 0;\n\t\tgoToPage(\"home\")\n\t}\n\n\tconst goToPage = async (page, args) => {\n\t\twindow.history.pushState(args, page)\n\t\thistory.push({ name: page, args: args || {} })\n\t\tsetActivePanel(history[history.length - 1]);\n\t\tconsole.log(\"setActivePanel:\" + history[history.length - 1].name)\n\t};\n\n\tuseEffect(() => {\n\t\tpoputRef.current = popout;\n\t}, [popout])\n\n\n\tuseEffect(() => {\n\n\t\twindow.addEventListener('popstate', e => {\n\t\t\tconsole.log(\"on pop state\")\n\t\t\te.preventDefault();\n\t\t\tgoBack(e)\n\t\t});\n\n\t\tconst authorise = async function () {\n\n\t\t\tconst response = await fetch(\"https://europe-west2-bonuscards-42f7a.cloudfunctions.net/token\" + props.search)\n\n\t\t\tconst json = await response.json();\n\t\t\tconsole.log(\"params checked\");\n\n\n\t\t\tawait firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n\n\t\t\tconsole.log(\"signInWithCustomToken\");\n\t\t\tawait firebase.auth().signInWithCustomToken(json.token);\n\t\t}\n\n\t\tconst onUser = function (user) {\n\n\t\t\tsetUser(user);\n\n\t\t\tprops.dispatch('cards/listen', { uid: user.uid })\n\n\t\t\tconst hashParams = parseQueryString(props.hash)\n\t\t\tif (hashParams.add_number != null && hashParams.add_name != null) {\n\t\t\t\tgoToPage('add', { name: hashParams.add_name, number: hashParams.add_number, serviceid: hashParams.add_service_id })\n\t\t\t}\n\t\t}\n\n\t\tif (firebase.auth().currentUser != null) {\n\t\t\tonUser(firebase.auth().currentUser)\n\t\t} else {\n\t\t\tfirebase.auth().onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\tonUser(user)\n\t\t\t\t} else {\n\t\t\t\t\tauthorise().catch((error) => {\n\t\t\t\t\t\tsetError(error);\n\t\t\t\t\t\tconsole.log(\"auth error:\" + error)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}, (error) => {\n\t\t\t\tconsole.log(error)\n\t\t\t});\n\t\t}\n\n\t\tvkconnect.subscribe((e) => {\n\t\t\tif (e.detail.type === \"VKWebAppViewRestore\") {\n\t\t\t\tlet user = firebase.auth().currentUser;\n\t\t\t\tif (user) {\n\t\t\t\t\tonUser(user);\n\t\t\t\t}\n\t\t\t} else if (e.detail.type === \"VKWebAppViewHide\") {\n\t\t\t\tconsole.log(\"terminate\")\n\t\t\t\tfirebase.firestore().terminate();\n\n\t\t\t}\n\t\t});\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\treturn (\n\t\t<ConfigProvider isWebView={true}>\n\t\t\t<Root activeView={error != null ? \"error\" : props.cards.loading === true ? \"splash\" : \"main\"}>\n\t\t\t\t<View id=\"splash\" activePanel=\"splash\">\n\t\t\t\t\t<Panel id=\"splash\">\n\n\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '75vh' }}>\n\n\t\t\t\t\t\t\t<Spinner size=\"large\" />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<FixedLayout vertical='bottom'>\n\t\t\t\t\t\t\t<Footer className=\"unselectable\">{packageJson.version}</Footer>\n\t\t\t\t\t\t</FixedLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\n\t\t\t\t<View id=\"error\" activePanel=\"error\">\n\t\t\t\t\t<Panel id=\"error\">\n\t\t\t\t\t\t<PanelHeader >Бонус карты</PanelHeader>\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\t\tПроизошла ошибка, попробуйте еще раз\n\t\t\t\t\t</Placeholder>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\n\t\t\t\t<View id=\"main\" activePanel={activePanel.name} popout={popout} modal={modal} onSwipeBack={goBack}>\n\t\t\t\t\t<Home id='home' goToPage={goToPage} user={user} args={activePanel.args} />\n\t\t\t\t\t<Card id='card' goToPage={goToPage} goBack={goBack} goHome={goHome} setPopout={setPopoutInternal} args={activePanel.args} />\n\t\t\t\t\t<Services id='services' goToPage={goToPage} goBack={goBack} args={activePanel.args} />\n\t\t\t\t\t<AddCard id='add' goToPage={goToPage} goBack={goBack} goHome={goHome} args={activePanel.args} user={user} setModal={setModal} />\n\t\t\t\t</View>\n\n\t\t\t</Root>\n\t\t</ConfigProvider>\n\t)\n}\n\nexport default connect('cards', App)\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\nimport createStore from 'storeon'\nimport persistState from '@storeon/localstorage'\nimport cards from './cards'\nimport prefs from './prefs'\nimport StoreContext from 'storeon/react/context'\n//import registerServiceWorker from './sw';\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n//registerServiceWorker();\n\nconnect.subscribe((e) => {\n    console.log(e.detail.type);\n    switch (e.detail.type) {\n        case 'VKWebAppUpdateConfig':\n            let schemeAttribute = document.createAttribute('scheme');\n            schemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'client_light';\n            document.body.attributes.setNamedItem(schemeAttribute);\n            break;\n        default:\n            console.log(e.detail.type);\n            console.log(e.detail.data);\n    }\n});\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\nconst store = createStore([cards, prefs, persistState(['prefs']),])\n\nconst search = window.location.search\nconst hash = window.location.hash\n\nReactDOM.render(<StoreContext.Provider value={store}><App search={search} hash={hash} /></StoreContext.Provider>, document.getElementById('root'));\n// ReactDOM.render((\n//         <StoreContext.Provider value={store}>\n//             <App  search={search} hash={hash} />\n//         </StoreContext.Provider>), document.getElementById('root'))\n\n","\nimport firebase from './firebase'\n\nexport default store => {\n\n    store.on('@init', () => ({ cards: { loading: true, data: [] } }))\n\n    store.on('cards/save', ({ cards }, { cardsToSave }) => {\n        cards.data = cardsToSave;\n        cards.loading = false;\n        console.log(\"update cards\");\n        return { cards: cards }\n    })\n\n    store.on('cards/listen', ({ cards }, { uid }) => {\n        const db = firebase.firestore();\n        db.collection('cards').where(\"uid\", \"==\", uid)\n            .onSnapshot({ includeMetadataChanges: true }, function (snapshot) {\n                console.log(snapshot);\n                store.dispatch('cards/api/get', uid)\n            })\n    })\n\n    store.on('cards/api/get', ({ cards }, uid) => {\n        const db = firebase.firestore();\n        db.collection('cards').where(\"uid\", \"==\", uid).get().then((snapshot) => {\n            const cardsToSave = snapshot.docs.map((doc) => {\n                return {\n                    docId: doc.id,\n                    uid: doc.data().uid,\n                    id: doc.data().id,\n                    name: doc.data().name,\n                    number: doc.data().number,\n                    serviceId: doc.data().service_id,\n                }\n            })\n            store.dispatch('cards/save', { cardsToSave })\n        }).catch((error)=>{\n            console.log(\"error get cards from firebase:\"+error);\n        });\n\n    })\n\n    store.on('cards/api/add', ({ cards }, card) => {\n        const db = firebase.firestore();\n        card.id = makeid(20);\n        db.collection('cards').add({\n            uid: card.uid,\n            id: card.id,\n            name: card.name,\n            number: card.number,\n            service_id: card.serviceId\n        })\n    })\n\n    store.on('cards/api/delete', ({ cards }, card) => {\n        const db = firebase.firestore();\n        db.collection(\"cards\").doc(card.docId).delete();\n    })\n\n    function makeid(length) {\n        var result = '';\n        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        var charactersLength = characters.length;\n        for (var i = 0; i < length; i++) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n    }\n}","export default prefs => {\n    prefs.on('@init', () => ({ prefs: {} }))\n\n    prefs.on('prefs/set', ({ prefs }, pref) => {\n        \n        prefs[pref.key] = pref.value;\n        return prefs;\n\n    })\n\n}"],"sourceRoot":""}