{"version":3,"sources":["img/barcode_how.png","panels/Home.js","panels/Card.js","img/barcode.svg","panels/AddCard.js","panels/Services.js","firebase.js","App.js","routes.js","index.js","cards.js","prefs.js","create-router.js"],"names":["module","exports","Home","props","state","search","services","onChange","bind","this","setState","fetch","then","res","json","data","all","id","router","noShadow","vertical","value","theme","cards","length","style","height","icon","paddingTop","marginBottom","map","card","before","logo","type","src","process","background","bgColor","multiline","expandable","removable","key","onClick","navigate","description","number","name","platform","ANDROID","float","className","size","toLowerCase","trim","searchTranslit","cyrillicToTranslit","transform","filter","indexOf","service","serviceId","React","Component","connect","osName","Card","useStoreon","dispatch","useState","snackbar","setSnackbar","route","params","closeDialog","setPopout","left","window","history","back","IOS","vkconnect","send","text","toString","displayValue","fontSize","display","stretched","level","link","encodeURIComponent","console","log","marginRight","actionsLayout","onClose","actions","title","false","action","autoclose","layout","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","x","y","width","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref","svgRef","viewBox","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","AddCard","onTooltipClose","tooltip","onDone","qr_data","error","onError","onScanClick","prop","prefs","setModal","activeModal","imgBarcode","caption","scan","sendPromise","catch","goBack","goHome","replace","onAddClick","isValidName","isValidCard","uid","user","onChangeText","e","substring","serviceid","decodeURIComponent","match","osname","marginTop","isShown","alignX","cornerOffset","offsetX","offsetY","paddingRight","autoFocus","status","placeholder","fill","disabled","Services","popular","cache","CellMeasurerCache","fixedWidth","defaultHeight","keyword","includes","renderCard","index","parent","columnIndex","rowIndex","deferredMeasurementCache","rowHeight","rowRenderer","renderRow","rowCount","overscanRowCount","filtered","matchSearch","keywords","unshift","charAt","toUpperCase","slice","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","auth","onIdTokenChanged","token","analytics","App","popout","modal","setUser","setError","poputRef","useRef","parseQueryString","string","split","queryParam","kvp","reduce","query","useEffect","current","canActivate","toState","fromState","go","authorise","a","response","onUser","vk_user_id","hashParams","hash","add_number","add_name","add_service_id","activeView","loading","activePanel","justifyContent","alignItems","packageJson","version","nodeName","path","subscribe","detail","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","store","createStore","on","cardsToSave","firestore","collection","where","onSnapshot","includeMetadataChanges","snapshot","get","docs","doc","docId","service_id","db","result","characters","charactersLength","Math","floor","random","makeid","add","delete","pref","persistState","createRouter","routes","defaultRoute","usePlugin","browserPlugin","useHash","location","start","ReactDOM","render","Provider","getElementById"],"mappings":"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","file":"static/js/main.a2d20f1c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/barcode_how.f8d6a335.png\";","import React from 'react';\n\nimport { Panel, FixedLayout, Div, Button, platform, ANDROID, List, Cell, PanelHeader, Search, Avatar, Placeholder } from\n\t'@vkontakte/vkui'\nimport Icon24Add from '@vkontakte/icons/dist/24/add'\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\nimport connect from 'storeon/react/connect'\nimport cyrillicToTranslit from 'cyrillic-to-translit-js'\n\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\n\nimport './Cards.css';\n\nclass Home extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { search: '', services: [] };\n\t\tthis.onChange = this.onChange.bind(this);\n\t}\n\n\tonChange(search) { this.setState({ search }); }\n\n\tget cards() {\n\t\tconst cards = this.props.cards.data;\n\t\tconst search = this.state.search.toLowerCase().trim();\n\t\tconst searchTranslit = cyrillicToTranslit().transform(search);\n\t\tconst filtered = cards.filter(({ name }) => {\n\t\t\treturn name.toLowerCase().indexOf(search) > -1 || name.toLowerCase().indexOf(searchTranslit) > -1;;\n\t\t}).map((card) => {\n\t\t\tconst service = this.state.services.filter(({ id }) => {\n\t\t\t\treturn id === card.serviceId\n\t\t\t})[0];\n\t\t\treturn ({\n\t\t\t\tid: card.id,\n\t\t\t\tname: card.name,\n\t\t\t\tnumber: card.number,\n\t\t\t\tlogo: service != null ? service.logo : null,\n\t\t\t\tbgColor: service != null ? service.bgColor : null\n\t\t\t})\n\t\t});\n\n\t\treturn filtered;\n\t}\n\n\tcomponentDidMount() {\n\n\t\tfetch(`./data.json`)\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => this.setState({ services: json.data.all }));\n\t}\n\n\n\trender() {\n\t\tlet {\n\t\t\tid,\n\t\t\trouter,\n\t\t} = this.props\n\n\n\t\treturn (\n\t\t\t<Panel id={id}>\n\t\t\t\t<PanelHeader noShadow>Бонус карты</PanelHeader>\n\n\t\t\t\t<FixedLayout vertical='top'>\n\n\t\t\t\t\t<Search value={this.state.search} onChange={this.onChange} theme=\"default\" />\n\n\t\t\t\t</FixedLayout>\n\n\n\t\t\t\t{\n\t\t\t\t\tthis.cards.length === 0 && this.state.search.length === 0 ?\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ height: 52 }} />\n\t\t\t\t\t\t\t<Placeholder\n\n\t\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tВы не добавили ни одной карточки\n\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t: this.cards.length === 0 &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ height: 52 }} />\n\t\t\t\t\t\t\t<Placeholder\n\n\t\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\t\t\tПо Вашему запросу ничего не найдено\n\t\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t}\n\n\n\t\t\t\t<List style={{ paddingTop:60, marginBottom: 60 }}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.cards.map((card) =>\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tbefore={\n\t\t\t\t\t\t\t\t\t\ttypeof card.logo !== 'undefined' && card.logo != null ?\n\t\t\t\t\t\t\t\t\t\t\t<Avatar type=\"image\" src={process.env.PUBLIC_URL + card.logo} style={{ background: card.bgColor }} />\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<Avatar type=\"image\" ><Icon28Money /></Avatar>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\texpandable\n\t\t\t\t\t\t\t\t\tremovable={false}\n\t\t\t\t\t\t\t\t\tkey={card.id}\n\t\t\t\t\t\t\t\t\tonClick={() => router.navigate('card', { id: card.id })}\n\t\t\t\t\t\t\t\t\tdescription={card.number}\n\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{card.name}\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</List>\n\n\t\t\t\t<FixedLayout vertical='bottom'>\n\t\t\t\t\t{\n\t\t\t\t\t\tplatform() === ANDROID ?\n\t\t\t\t\t\t\t<Div style={{ float: 'right' }}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName='FixedBottomButton'\n\t\t\t\t\t\t\t\t\tonClick={() => router.navigate('services')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon24Add />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\t\t\t\tonClick={() => router.navigate('services')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tДобавить новую карту\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t}\n\n\t\t\t\t</FixedLayout>\n\n\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n\n\nexport default connect('cards', Home)\n","import React, { useState } from 'react';\n\nimport { platform, IOS, Group, Panel, Div, Button, PanelHeader, HeaderButton, Alert, Footer, Snackbar, Placeholder } from '@vkontakte/vkui';\n\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Delete from '@vkontakte/icons/dist/24/delete'\nimport Icon24Share from '@vkontakte/icons/dist/24/share'\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\n\nimport './Cards.css';\nimport Barcode from 'react-barcode'\nimport useStoreon from 'storeon/react'\n\nimport vkconnect from '@vkontakte/vk-connect';\n\nconst osName = platform();\n\nconst Card = props => {\n\tconst { dispatch, cards } = useStoreon('cards')\n\n\tconst [snackbar, setSnackbar] = useState(null);\n\n\n\tconst card = cards.data.filter((card) => card.id === props.route.params.id)[0]\n\n\n\tconst closeDialog = () => {\n\t\tprops.setPopout(null)\n\t}\n\n\tconst showDeleteDialog = () => {\n\t\tprops.setPopout(<Alert\n\t\t\tactionsLayout=\"vertical\"\n\t\t\tonClose={closeDialog}\n\t\t\tactions={[{\n\t\t\t\ttitle: 'Удалить',\n\t\t\t\tfalse: true,\n\t\t\t\tstyle: 'destructive',\n\t\t\t\taction: () => {\n\t\t\t\t\tcloseDialog()\n\t\t\t\t\twindow.history.back()\n\t\t\t\t\tdispatch('cards/api/delete', card)\n\t\t\t\t},\n\t\t\t}, {\n\t\t\t\ttitle: 'Отмена',\n\t\t\t\tautoclose: true,\n\t\t\t\tstyle: 'cancel',\n\t\t\t}]}\n\t\t>\n\t\t\t<h2>Подтвердите действие</h2>\n\t\t\t<p>Вы уверены, что хотите<br></br>удалить карту {card.name}?</p>\n\t\t</Alert>)\n\t}\n\n\tconst share = () => {\n\t\tconst link = 'https://vk.com/app7225850#add_name=' + encodeURIComponent(card.name) + '&add_service_id=' + card.serviceId + '&add_number=' + card.number;\n\t\tconsole.log(link)\n\t\tvkconnect.send(\"VKWebAppShare\", { \"link\": link });\n\t}\n\n\tconst copyToClipboard = () => {\n\t\tsetSnackbar(true)\n\t\tvkconnect.send(\"VKWebAppCopyText\", { text: card.number });\n\t}\n\n\treturn (\n\t\t<Panel id={props.id}>\n\t\t\t<PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={() => window.history.back()} >\n\t\t\t\t\t{osName === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\n\t\t\t\t</HeaderButton>}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\ttypeof card !== 'undefined' ? card.name : \"Упс\"\n\t\t\t\t}\n\n\t\t\t</PanelHeader>\n\n\n\t\t\t{\n\t\t\t\ttypeof card !== 'undefined' &&\n\t\t\t\t<div>\n\t\t\t\t\t<Group >\n\n\t\t\t\t\t\t<div className=\"BarcodeContainer\" onClick={copyToClipboard} >\n\t\t\t\t\t\t\t<div className=\"Barcode\">\n\t\t\t\t\t\t\t\t<Barcode value={card.number.toString()} displayValue={true} fontSize={25} height={120} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</Group>\n\n\n\t\t\t\t\t<Footer className=\"unselectable\">Предъявите этот код на кассе магазина</Footer>\n\n\t\t\t\t\t<Div style={{ display: 'flex' }}>\n\t\t\t\t\t\t<Button before={<Icon24Share />} size=\"l\" stretched level=\"secondary\" onClick={share} style={{ marginRight: 8 }}>Поделиться</Button>\n\t\t\t\t\t\t<Button before={<Icon24Delete />} size=\"l\" stretched level=\"destructive\" onClick={showDeleteDialog}>Удалить</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{\n\t\t\t\ttypeof card === 'undefined' &&\n\t\t\t\t<Placeholder\n\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\tТакой карточки нет, либо она была удалена\n\t\t\t\t</Placeholder>\n\n\t\t\t}\n\t\t\t{\n\t\t\t\tsnackbar && <Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => setSnackbar(false)}\n\t\t\t\t>\n\t\t\t\t\tНомер скопирован в буфер обмена\n\t  \t\t\t</Snackbar>\n\t\t\t}\n\n\n\t\t</Panel>\n\t);\n}\n\n\n\nexport default Card;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M80,48H16C7.168,48,0,55.168,0,64v64c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V80h48c8.832,0,16-7.168,16-16 C96,55.168,88.832,48,80,48z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M464,336c-8.832,0-16,7.168-16,16v48h-48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h64c8.832,0,16-7.168,16-16v-64 C480,343.168,472.832,336,464,336z\"\n})));\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M464,48h-64c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h48v48c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V64 C480,55.168,472.832,48,464,48z\"\n})));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M80,400H32v-48c0-8.832-7.168-16-16-16c-8.832,0-16,7.168-16,16v64c0,8.832,7.168,16,16,16h64c8.832,0,16-7.168,16-16 C96,407.168,88.832,400,80,400z\"\n})));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 64,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 128,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 192,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 256,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 320,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 384,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 128,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 192,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 320,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref18 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref19 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref20 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref21 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref22 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref23 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref24 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref25 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref26 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref27 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref28 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref29 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgBarcode = function SvgBarcode(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 480 480\",\n    style: {\n      enableBackground: \"new 0 0 480 480\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBarcode, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/barcode.6d6249dd.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\n\n\nimport { Panel, PanelHeader, FormLayout, Input, Button, Div, platform, IOS, HeaderButton, Cell, Avatar, Tooltip, ModalCard, ModalRoot } from '@vkontakte/vkui'\n\n\n\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\n\nimport connect from 'storeon/react/connect'\nimport vkconnect from '@vkontakte/vk-connect';\n\nimport { ReactComponent as IconBarcode } from '../img/barcode.svg';\nimport imgBarcode from '../img/barcode_how.png';\n\nimport './Cards.css';\n\n\nclass AddCard extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        let number = props.route.params.number || '';\n        this.state = {\n            tooltip: props.prefs[\"scan_tooltip_shown\"] !== true,\n            serviceId: props.route.params.serviceid,\n            name: decodeURIComponent(props.route.params.name),\n            number: number,\n            error: !this.isValidCard(number),\n            service: null\n        };\n\n    }\n\n    componentDidMount() {\n        fetch(`./data.json`)\n            .then(res => res.json())\n            .then(json => this.setState({\n                service: json.data.all.filter(({ id }) => {\n                    return id === this.state.serviceId\n                })[0]\n            }));\n    }\n\n    onTooltipClose = () => {\n        this.props.dispatch('prefs/set', { key: \"scan_tooltip_shown\", value: true })\n        this.setState({ tooltip: false })\n    }\n\n    onDone = (data) => {\n        this.setState({ number: data.qr_data, error: false })\n    }\n\n    onError = (error) => {\n        //TODO show error\n    }\n\n    onScanClick = (prop) => {\n        const showScanIosTooltip = this.props.prefs[\"scan_ios_tooltip_shown\"] !== true && platform === IOS\n        if (showScanIosTooltip) {\n            this.props.setModal(\n                <ModalRoot activeModal=\"modal\">\n                    <ModalCard\n                        id=\"modal\"\n                        onClose={() => this.props.setModal(null)}\n                        icon={<Avatar type=\"app\" src={imgBarcode} size={72} />}\n                        title=\"Чтобы отсканировать, наведите код на нижнюю часть рамки\"\n                        caption=\"Найдите хорошее освещение\"\n                        actions={[\n                            {\n                                title: 'Больше не показывать',\n                                type: 'secondary',\n                                action: () => {\n                                    this.props.dispatch('prefs/set', { key: \"scan_ios_tooltip_shown\", value: true })\n                                    this.props.setModal(null);\n                                    this.scan(prop);\n                                }\n                            },\n                            {\n                                title: 'Понял',\n                                type: 'primary',\n                                action: () => {\n                                    this.props.setModal(null);\n                                    this.scan(prop);\n                                }\n                            }\n\n                        ]}\n                    />\n                </ModalRoot>)\n        } else {\n            this.scan(prop);\n        }\n\n    }\n\n\n    scan = (prop) => {\n        vkconnect\n            .sendPromise('VKWebAppOpenQR')\n            .then(this.onDone)\n            .catch(this.onError);\n\n    }\n\n\n    goBack = () => {\n        window.history.back()\n    }\n\n    goHome = () => {\n        this.props.router.navigate(\"home\", {}, { replace: true })\n    }\n\n    onAddClick = () => {\n\n        let {\n            name,\n            number\n        } = this.state\n\n        if (this.isValidName(name) && this.isValidCard(number)) {\n            this.setState({ error: false })\n            const serviceId = this.state.serviceId;\n            const uid = this.props.user.uid;\n            this.props.dispatch('cards/api/add', { uid, name, number, serviceId })\n            this.goHome();\n        } else {\n            this.setState({ error: true })\n        }\n\n    }\n\n    onChangeText = (e) => {\n        // eslint-disable-next-line\n        const number = e.target.value.trim().substring(0, 24).replace(/[^\\x00-\\x7F]/g, \"\")\n        this.setState({ number, error: !this.isValidCard(number) })\n    }\n\n    isValidName(name) {\n        return name !== '';\n    }\n\n    isValidCard(number) {\n        return number != null && number.match(\"^[\\x00-\\x7F]{6,24}$\");\n    }\n\n    render() {\n        const osname = platform()\n\n        return (\n            <Panel id={this.props.id}>\n                <PanelHeader\n                    left={<HeaderButton onClick={() => this.goBack()} >\n                        {osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\n                    </HeaderButton>}\n\n                >\n                    Новая карта\n\n                </PanelHeader>\n\n\n                <Cell\n                    style={{ marginTop: 10 }}\n                    before={\n                        this.state.service != null && this.state.service.logo != null ?\n                            <Avatar type=\"image\" src={process.env.PUBLIC_URL + this.state.service.logo} style={{ background: this.state.service.bgColor }} />\n                            :\n                            <Avatar type=\"image\" ><Icon28Money /></Avatar>\n                    }\n                >\n                    {this.state.name}\n                </Cell>\n\n\n                <FormLayout>\n\n\n                    <div >\n                        <Tooltip text=\"Карту можно отсканировать\"\n                            isShown={this.state.tooltip}\n                            alignX=\"right\"\n                            cornerOffset={-10}\n                            offsetX={-5}\n                            offsetY={5}\n                            onClose={this.onTooltipClose}>\n                            <Input\n                                style={{ paddingRight: 56 }}\n                                autoFocus\n                                status='default'\n                                onChange={this.onChangeText}\n                                value={this.state.number}\n                                type=\"text\"\n                                placeholder='Введите номер карты' />\n                        </Tooltip>\n\n                        <IconBarcode onClick={this.onScanClick} className=\"Scan\" width={30} height={30} fill=\"var(--control_foreground)\" />\n\n\n                    </div>\n\n                </FormLayout>\n\n\n\n                <Div>\n                    <Button\n                        disabled={this.state.error === true}\n                        size='xl'\n                        onClick={(e) => this.onAddClick(e)}>\n                        Создать\n                    </Button>\n                </Div>\n\n            </Panel>\n        );\n    }\n\n\n}\n\nexport default connect('cards', \"prefs\", AddCard)","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, HeaderButton, IOS, platform, Cell, PanelHeader, Search, Avatar, Spinner, Header } from\n    '@vkontakte/vkui'\n\nimport { List as Virtualized, AutoSizer, CellMeasurer, CellMeasurerCache } from \"react-virtualized\";\n\nimport cyrillicToTranslit from 'cyrillic-to-translit-js'\nimport Icon24Back from '@vkontakte/icons/dist/24/back'\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back'\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\n\n\nimport './Cards.css';\n\n\n\nconst osname = platform();\n\nclass Services extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { search: '', services: [], popular: [] };\n        this.onChange = this.onChange.bind(this);\n\n        this.cache = new CellMeasurerCache({\n            fixedWidth: true,\n            defaultHeight: 100\n        });\n    }\n\n    onChange(search) {\n        this.setState({ search: search.substring(0, 40) });\n    }\n\n    matchSearch(keyword, search) {\n        return keyword.toLowerCase().indexOf(search) > -1;\n    }\n\n    get services() {\n        const search = this.state.search.toLowerCase().trim();\n        const searchTranslit = cyrillicToTranslit().transform(search);\n        const filtered = this.state.services.filter((service) => {\n\n            return this.matchSearch(service.name, search) || this.matchSearch(service.name, searchTranslit) || (service.keywords != null && service.keywords.filter((keyword) => {\n                return this.matchSearch(keyword, search) || this.matchSearch(keyword, searchTranslit)\n            }).length > 0);\n        }).map((service) => {\n            return service\n        });\n\n        if (search.length > 0) {\n            filtered.unshift({\n                id: null,\n                logo: null,\n                name: search\n            });\n        }\n\n        return filtered.map((service) => {\n            service.name = service.name.charAt(0).toUpperCase() + service.name.slice(1);\n            return service\n        });\n    }\n\n\n    componentDidMount() {\n        fetch(`./data.json`)\n            .then(res => res.json())\n            .then(json =>\n                this.setState({\n                    services: json.data.all, popular: json.data.all.filter(({ id }) => {\n                        return json.data.popular.includes(id)\n                    })\n                })\n            );\n    }\n\n\n    renderHeader() {\n        return (\n            <div>\n                <Header level=\"secondary\">Популярное</Header>\n                {this.state.popular.map((service) => this.renderCard(service))}\n                <Header level=\"secondary\">Все</Header>\n            </div>\n        )\n    }\n\n\n    renderRow(index, key, style, parent) {\n        var card = this.services[index];\n        return (\n            <CellMeasurer\n                key={key}\n                cache={this.cache}\n                parent={parent}\n                columnIndex={0}\n                rowIndex={index}>\n                <div key={key} style={style} >\n                    {/* {index === 0 && this.state.search.length == 0 && this.renderHeader()} */}\n                    {this.renderCard(card)}\n                </div>\n            </CellMeasurer>\n        )\n    }\n\n    renderCard(card) {\n        return (\n            <Cell\n                before={\n                    typeof card.logo !== 'undefined' && card.logo != null ?\n                        <Avatar type=\"image\" src={process.env.PUBLIC_URL + card.logo} style={{ background: card.bgColor }} />\n                        :\n                        <Avatar type=\"image\" ><Icon28Money /></Avatar>\n                }\n\n                expandable\n                removable={false}\n                key={card.id}\n                onClick={() => {\n                    this.props.router.navigate('add', { name: card.name, serviceid: card.id })\n                }}\n            >\n                {card.name}\n            </Cell>\n        )\n    }\n\n\n    goBack() {\n        window.history.back()\n    }\n\n    render() {\n        let {\n            id,\n        } = this.props\n\n        return (\n            <Panel id={id}>\n\n                <PanelHeader\n                    left={<HeaderButton onClick={this.goBack} >{osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}</HeaderButton>}\n                >\n\n                    <Search\n                        theme=\"header\"\n                        style={{ paddingRight: osname === IOS ? 0 : 56 }}\n                        value={this.state.search}\n                        onChange={this.onChange}\n                        onClose={this.goBack}\n                    />\n\n                </PanelHeader>\n\n                {\n                    this.state.services.length === 0 &&\n                    <Spinner size=\"medium\" style={{ marginTop: 20 }} />\n                }\n\n\n\n                <AutoSizer>\n                    {({ height, width }) => (\n\n\n                        <Virtualized\n\n                            width={width}\n                            height={height}\n                            deferredMeasurementCache={this.cache}\n                            rowHeight={this.cache.rowHeight}\n                            rowRenderer={({ index, key, style, parent }) => this.renderRow(index, key, style, parent)}\n                            rowCount={this.services.length}\n                            overscanRowCount={3} >\n\n                        </Virtualized>\n\n\n                    )}\n\n                </AutoSizer>\n\n\n            </Panel>\n        );\n    }\n}\n\n\nServices.propTypes = {\n    id: PropTypes.string.isRequired,\n\n};\n\nexport default Services","\nimport firebase from 'firebase/app';\nimport 'firebase/analytics';\nimport 'firebase/auth'\nimport 'firebase/firestore';\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCfEuUvuiEzVpUHg46vyWGPSISl4iyb2Mg\",\n    authDomain: \"bonuscards-42f7a.firebaseapp.com\",\n    databaseURL: \"https://bonuscards-42f7a.firebaseio.com\",\n    projectId: \"bonuscards-42f7a\",\n    storageBucket: \"bonuscards-42f7a.appspot.com\",\n    messagingSenderId: \"774318858298\",\n    appId: \"1:774318858298:web:0dc82b27bebdd8f1849503\",\n    measurementId: \"G-HS7VBZ98KJ\"\n};\n// Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig)\nconsole.log(firebase.apps)\n\nfirebase.auth().onIdTokenChanged((token)=>console.log(\"onIdTokenChanged\"))\n\nfirebase.analytics();\n\nexport default firebase;","import React, { useState, useEffect, useRef } from 'react';\nimport connect from 'storeon/react/connect'\nimport vkconnect from '@vkontakte/vk-connect';\nimport { View, Root, Panel, Spinner, Footer, FixedLayout, Placeholder, PanelHeader } from '@vkontakte/vkui'\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\nimport { RouteNode } from 'react-router5'\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './panels/Home';\nimport Card from './panels/Card';\nimport AddCard from './panels/AddCard';\nimport Services from './panels/Services';\nimport firebase from './firebase'\nimport packageJson from './package.alias.json';\n\n\nconst App = (props) => {\n\n\tconst [popout, setPopout] = useState(null);\n\tconst [modal, setModal] = useState(null);\n\tconst [user, setUser] = useState(null);\n\tconst [error, setError] = useState(null);\n\n\tconst poputRef = useRef(popout);\n\n\n\tconst parseQueryString = (string) => {\n\t\treturn string.slice(1).split('&')\n\t\t\t.map((queryParam) => {\n\t\t\t\tlet kvp = queryParam.split('=');\n\t\t\t\treturn { key: kvp[0], value: kvp[1] }\n\t\t\t})\n\t\t\t.reduce((query, kvp) => {\n\t\t\t\tquery[kvp.key] = kvp.value;\n\t\t\t\treturn query\n\t\t\t}, {})\n\t};\n\n\tuseEffect(() => {\n\t\tpoputRef.current = popout;\n\n\t\t//Почему в реакте такая геморная навигация????\n\t\tprops.router.canActivate(\"home\", (router) => (toState, fromState) => {\n\t\t\tif (fromState.name === \"card\" && poputRef.current !== null) {\n\t\t\t\tsetPopout(null)\n\t\t\t\twindow.history.go(1)\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t});\n\t\t// eslint-disable-next-line\n\t}, [popout])\n\n\n\n\tuseEffect(() => {\n\t\tconsole.log(\"app useEffect\");\n\n\t\tconst authorise = async function () {\n\n\t\t\tconsole.log(\"check..\")\n\t\t\tconst response = await fetch(\"https://europe-west2-bonuscards-42f7a.cloudfunctions.net/token\" + props.search)\n\t\t\tconsole.log(\"checked\")\n\n\t\t\tconst json = await response.json();\n\n\t\t\tconsole.log(props.search)\n\t\t\n\t\t\t// await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n\t\t\t// console.log(\"signin...\")\n\t\t\t// let cred = await firebase.auth().signInWithCustomToken(json.token);\n\t\t\t// console.log(\"signed in \"+cred.user)\n\t\t\tonUser({uid:parseQueryString(props.search).vk_user_id})\n\t\t}\n\n\t\tconst onUser = function(user){\n\t\t\tconsole.log(\"auth ok:\" + user.uid)\n\t\t\tsetUser(user);\n\n\t\t\tprops.dispatch('cards/listen', { uid: user.uid })\n\n\t\t\tconst hashParams = parseQueryString(props.hash)\n\t\t\tif (hashParams.add_number != null && hashParams.add_name != null) {\n\t\t\t\tconsole.log(\"share:\" + hashParams.add_name + \" \" + hashParams.add_number + \" \" + hashParams.add_service_id)\n\t\t\t\tconsole.log(\"user#1:\"+user)\n\t\t\t\tprops.router.navigate('add', { name: hashParams.add_name, number: hashParams.add_number, serviceid: hashParams.add_service_id })\n\t\t\t}\n\t\t}\n\n\t\tconst init = function () {\n\t\t\t// console.log(\"user:\"+firebase.auth().currentUser)\n\t\t\t// if(firebase.auth().currentUser!=null){\n\t\t\t// \tonUser(firebase.auth().currentUser)\n\t\t\t// }else{\n\t\t\t// \tfirebase.auth().onAuthStateChanged(function (user) {\n\t\t\t// \t\tconsole.log(\"onAuthStateChanged\")\n\t\t\t// \t\tif(user){\n\t\t\t// \t\t\tonUser(user)\n\t\t\t// \t\t}else{\n\t\t\t// \t\t\tauthorise().catch((error) => {\n\t\t\t// \t\t\t\tsetError(error);\n\t\t\n\t\t\t// \t\t\t\tconsole.log(\"auth error:\" + error)\n\t\t\t// \t\t\t})\n\t\t\t// \t\t}\n\t\t\t// \t}, (error)=>{\n\t\t\t// \t\tconsole.log(error)\n\t\t\t// \t});\n\n\t\t\t\t\n\t\t\t// }\n\t\t\tauthorise().catch((error) => {\n\t\t\t\tsetError(error);\n\n\t\t\t\tconsole.log(\"auth error:\" + error)\n\t\t\t})\n\t\t\t\n\t\t}\n\n\t\tinit();\n\n\t\t// vkconnect.subscribe((e) => {\n\t\t// \tconsole.log(\"event>\"+e.detail.type)\n\t\t// \tif(e.detail.type===\"VKWebAppViewRestore\"){\n\t\t// \t\tlet user = firebase.auth().currentUser;\n\t\t// \t\tif(user){\n\t\t// \t\t\tlet uid = user.uid;\n\t\t// \t\t\tprops.dispatch('cards/api/get', uid)\n\t\t// \t\t}\n\t\t// \t}\n\t\t// });\n\n\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\n\treturn (\n\t\t<Root activeView={error != null ? \"error\" : props.cards.loading === true ? \"splash\" : \"main\"}>\n\t\t\t<View id=\"splash\" activePanel=\"splash\">\n\t\t\t\t<Panel id=\"splash\">\n\n\n\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '75vh' }}>\n\n\t\t\t\t\t\t<Spinner size=\"large\" />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<FixedLayout vertical='bottom'>\n\n\t\t\t\t\t\t<Footer className=\"unselectable\">{packageJson.version}</Footer>\n\t\t\t\t\t</FixedLayout>\n\t\t\t\t</Panel>\n\n\t\t\t</View>\n\n\t\t\t<View id=\"error\" activePanel=\"error\">\n\t\t\t\t<Panel id=\"error\">\n\t\t\t\t\t<PanelHeader >Бонус карты</PanelHeader>\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\tПроизошла ошибка, попробуйте еще раз\n\t\t\t\t\t</Placeholder>\n\t\t\t\t</Panel>\n\n\t\t\t</View>\n\n\t\t\t<View id=\"main\" activePanel={props.route.name} popout={popout} modal={modal}>\n\t\t\t\t<Home id='home' router={props.router} route={props.route} user={user} />\n\t\t\t\t<Card id='card' router={props.router} route={props.route} setPopout={setPopout} />\n\t\t\t\t<Services id='services' router={props.router} route={props.route} />\n\t\t\t\t<AddCard id='add' router={props.router} route={props.route} user={user} setModal={setModal} />\n\n\t\t\t</View>\n\t\t</Root>\n\n\t)\n\n}\n\nexport default connect('cards', (props) => (\n\t<RouteNode nodeName=\"\">\n\t\t{({ route }) => <App route={route} {...props} />}\n\t</RouteNode>))\n","export default [\n    { name: 'home', path: '/' },\n    { name: 'card', path: '/card/:id' },\n    { name: 'add', path: '/add?serviceid&name&number' },\n    { name: 'services', path: '/services?q' }\n]","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\nimport createStore from 'storeon'\nimport createRouter from './create-router'\nimport { RouterProvider } from 'react-router5'\nimport persistState from '@storeon/localstorage'\nimport cards from './cards'\nimport prefs from './prefs'\nimport StoreContext from 'storeon/react/context'\n//import registerServiceWorker from './sw';\n\n\nconnect.subscribe((e) => {\n    switch (e.detail.type) {\n        case 'VKWebAppUpdateConfig':\n            let schemeAttribute = document.createAttribute('scheme');\n            schemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'client_light';\n            document.body.attributes.setNamedItem(schemeAttribute);\n            break;\n        default:\n            console.log(e.detail.type);\n    }\n });\n\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\nconst store = createStore([cards, prefs, persistState(['prefs']),])\nconst router = createRouter()\n\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n//registerServiceWorker();\n\nconst search = window.location.search\nconst hash = window.location.hash\n\n\nrouter.start(() => {\n    ReactDOM.render(\n        <RouterProvider router={router}>\n            <StoreContext.Provider value={store}>\n                <App router={router} search={search} hash={hash} />\n            </StoreContext.Provider>\n        </RouterProvider>, document.getElementById('root'));\n})\n\n","\nimport firebase from './firebase'\n\nexport default store => {\n\n    store.on('@init', () => ({ cards: { loading: true, data: [] } }))\n\n    store.on('cards/save', ({ cards }, { cardsToSave }) => {\n        cards.data = cardsToSave;\n        cards.loading = false;\n        console.log(\"update cards\");\n        return { cards: cards }\n    })\n\n\n    store.on('cards/listen', ({ cards }, { uid }) => {\n        const db = firebase.firestore();\n        db.collection('cards').where(\"uid\", \"==\", uid)\n            .onSnapshot({ includeMetadataChanges: true }, function (snapshot) {\n                console.log(\"onSnapshot \");\n\n                store.dispatch('cards/api/get', uid)\n            });\n    })\n\n    store.on('cards/api/get', ({ cards }, uid) => {\n        const db = firebase.firestore();\n        db.collection('cards').where(\"uid\", \"==\", uid).get().then((snapshot) => {\n            const cardsToSave = snapshot.docs.map((doc) => {\n                return {\n                    docId: doc.id,\n                    uid: doc.data().uid,\n                    id: doc.data().id,\n                    name: doc.data().name,\n                    number: doc.data().number,\n                    serviceId: doc.data().service_id,\n                }\n            })\n            store.dispatch('cards/save', { cardsToSave })\n\n        })\n\n    })\n\n\n    store.on('cards/api/add', ({ cards }, card) => {\n        const db = firebase.firestore();\n        card.id = makeid(20);\n        db.collection('cards').add({\n            uid: card.uid,\n            id: card.id,\n            name: card.name,\n            number: card.number,\n            service_id: card.serviceId\n        })\n    })\n\n\n    store.on('cards/api/delete', ({ cards }, card) => {\n        const db = firebase.firestore();\n        db.collection(\"cards\").doc(card.docId).delete();\n    })\n\n    function makeid(length) {\n        var result = '';\n        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        var charactersLength = characters.length;\n        for (var i = 0; i < length; i++) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n    }\n\n}","export default prefs => {\n    prefs.on('@init', () => ({ prefs: {} }))\n\n    prefs.on('prefs/set', ({ prefs }, pref) => {\n        \n        prefs[pref.key] = pref.value;\n        return prefs;\n\n    })\n\n}","import createRouter from 'router5'\n\nimport browserPlugin from 'router5-plugin-browser'\n\nimport routes from './routes'\n\nexport default function configureRouter() {\n    const router = createRouter(routes, {\n        defaultRoute: 'home'\n    })\n\n    // router.usePlugin(loggerPlugin)\n    router.usePlugin(\n        browserPlugin({\n            useHash: true\n        })\n    )\n\n\n    return router\n}"],"sourceRoot":""}