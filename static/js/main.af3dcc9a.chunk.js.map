{"version":3,"sources":["img/barcode_how.png","panels/Home.js","panels/Card.js","img/barcode.svg","panels/AddCard.js","panels/Services.js","firebase.js","App.js","index.js","cards.js","prefs.js"],"names":["module","exports","Home","props","state","search","services","onChange","bind","this","setState","fetch","then","res","json","data","all","id","noShadow","vertical","value","theme","cards","length","style","height","icon","paddingTop","marginBottom","map","card","before","logo","type","src","process","background","bgColor","multiline","expandable","removable","key","onClick","goToPage","description","number","name","platform","ANDROID","float","className","size","toLowerCase","trim","searchTranslit","cyrillicToTranslit","transform","filter","indexOf","service","serviceId","React","Component","connect","osName","Card","useStoreon","dispatch","useState","snackbar","setSnackbar","args","closeDialog","setPopout","left","window","history","back","IOS","vkconnect","send","text","toString","displayValue","fontSize","display","stretched","level","link","encodeURIComponent","console","log","marginRight","actionsLayout","onClose","actions","title","false","action","autoclose","layout","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","x","y","width","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref","svgRef","viewBox","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","AddCard","onTooltipClose","tooltip","onDone","qr_data","error","onError","onScanClick","prop","prefs","setModal","activeModal","imgBarcode","caption","scan","sendPromise","catch","onAddClick","isValidName","isValidCard","uid","user","goHome","onChangeText","e","substring","replace","serviceid","decodeURIComponent","match","osname","goBack","marginTop","isShown","alignX","cornerOffset","offsetX","offsetY","paddingRight","autoFocus","status","placeholder","fill","disabled","Services","popular","cache","CellMeasurerCache","fixedWidth","defaultHeight","keyword","renderCard","index","parent","columnIndex","rowIndex","deferredMeasurementCache","rowHeight","rowRenderer","renderRow","rowCount","overscanRowCount","filtered","matchSearch","keywords","unshift","charAt","toUpperCase","slice","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","onIdTokenChanged","token","analytics","activePanel","setActivePanel","popout","modal","setUser","setError","poputRef","useRef","current","pop","page","pushState","push","useEffect","addEventListener","preventDefault","authorise","a","response","setPersistence","Auth","Persistence","LOCAL","signInWithCustomToken","onUser","hashParams","hash","split","queryParam","kvp","reduce","query","add_number","add_name","add_service_id","currentUser","onAuthStateChanged","subscribe","detail","firestore","terminate","isWebView","activeView","loading","justifyContent","alignItems","packageJson","version","onSwipeBack","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","store","createStore","on","cardsToSave","collection","where","onSnapshot","includeMetadataChanges","snapshot","get","docs","doc","docId","service_id","db","result","characters","charactersLength","Math","floor","random","makeid","add","delete","pref","persistState","location","ReactDOM","render","Provider","getElementById"],"mappings":"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","file":"static/js/main.af3dcc9a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/barcode_how.f8d6a335.png\";","import React from 'react';\n\nimport { Panel, FixedLayout, Div, Button, platform, ANDROID, List, Cell, PanelHeader, Search, Avatar, Placeholder } from\n\t'@vkontakte/vkui'\nimport Icon24Add from '@vkontakte/icons/dist/24/add'\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\nimport connect from 'storeon/react/connect'\nimport cyrillicToTranslit from 'cyrillic-to-translit-js'\n\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\n\nimport './Cards.css';\n\nclass Home extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { search: '', services: [] };\n\t\tthis.onChange = this.onChange.bind(this);\n\t}\n\n\tonChange(search) { this.setState({ search }); }\n\n\tget cards() {\n\t\tconst cards = this.props.cards.data;\n\t\tconst search = this.state.search.toLowerCase().trim();\n\t\tconst searchTranslit = cyrillicToTranslit().transform(search);\n\t\tconst filtered = cards.filter(({ name }) => {\n\t\t\treturn name.toLowerCase().indexOf(search) > -1 || name.toLowerCase().indexOf(searchTranslit) > -1;;\n\t\t}).map((card) => {\n\t\t\tconst service = this.state.services.filter(({ id }) => {\n\t\t\t\treturn id === card.serviceId\n\t\t\t})[0];\n\t\t\treturn ({\n\t\t\t\tid: card.id,\n\t\t\t\tname: card.name,\n\t\t\t\tnumber: card.number,\n\t\t\t\tlogo: service != null ? service.logo : null,\n\t\t\t\tbgColor: service != null ? service.bgColor : null\n\t\t\t})\n\t\t});\n\n\t\treturn filtered;\n\t}\n\n\tcomponentDidMount() {\n\t\tfetch(`./data.json`)\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => this.setState({ services: json.data.all }));\n\t}\n\n\n\trender() {\n\t\tlet {\n\t\t\tid,\n\t\t} = this.props\n\n\n\t\treturn (\n\t\t\t<Panel id={id}>\n\t\t\t\t<PanelHeader noShadow>Бонус карты</PanelHeader>\n\n\t\t\t\t<FixedLayout vertical='top'>\n\n\t\t\t\t\t<Search value={this.state.search} onChange={this.onChange} theme=\"default\" />\n\n\t\t\t\t</FixedLayout>\n\n\n\t\t\t\t{\n\t\t\t\t\tthis.cards.length === 0 && this.state.search.length === 0 ?\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ height: 52 }} />\n\t\t\t\t\t\t\t<Placeholder\n\n\t\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tВы не добавили ни одной карточки\n\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t: this.cards.length === 0 &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ height: 52 }} />\n\t\t\t\t\t\t\t<Placeholder\n\n\t\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\t\t\tПо Вашему запросу ничего не найдено\n\t\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t}\n\n\n\t\t\t\t<List style={{ paddingTop:60, marginBottom: 60 }}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.cards.map((card) =>\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tbefore={\n\t\t\t\t\t\t\t\t\t\ttypeof card.logo !== 'undefined' && card.logo != null ?\n\t\t\t\t\t\t\t\t\t\t\t<Avatar type=\"image\" src={process.env.PUBLIC_URL + card.logo} style={{ background: card.bgColor }} />\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<Avatar type=\"image\" ><Icon28Money /></Avatar>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\texpandable\n\t\t\t\t\t\t\t\t\tremovable={false}\n\t\t\t\t\t\t\t\t\tkey={card.id}\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.goToPage('card', { id: card.id })}\n\t\t\t\t\t\t\t\t\tdescription={card.number}\n\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{card.name}\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</List>\n\n\t\t\t\t<FixedLayout vertical='bottom'>\n\t\t\t\t\t{\n\t\t\t\t\t\tplatform() === ANDROID ?\n\t\t\t\t\t\t\t<Div style={{ float: 'right' }}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName='FixedBottomButton'\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.goToPage('services')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon24Add />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\t\t\t\tonClick={() => this.props.goToPage('services')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tДобавить новую карту\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t}\n\n\t\t\t\t</FixedLayout>\n\n\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n\n\nexport default connect('cards', Home)\n","import React, { useState } from 'react';\n\nimport { platform, IOS, Group, Panel, Div, Button, PanelHeader, HeaderButton, Alert, Footer, Snackbar, Placeholder } from '@vkontakte/vkui';\n\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Delete from '@vkontakte/icons/dist/24/delete'\nimport Icon24Share from '@vkontakte/icons/dist/24/share'\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\n\nimport './Cards.css';\nimport Barcode from 'react-barcode'\nimport useStoreon from 'storeon/react'\n\nimport vkconnect from '@vkontakte/vk-connect';\n\nconst osName = platform();\n\nconst Card = props => {\n\tconst { dispatch, cards } = useStoreon('cards')\n\n\tconst [snackbar, setSnackbar] = useState(null);\n\n\tconst card = cards.data.filter((card) => card.id === props.args.id)[0]\n\n\n\tconst closeDialog = () => {\n\t\tprops.setPopout(null)\n\t}\n\n\tconst showDeleteDialog = () => {\n\t\tprops.setPopout(<Alert\n\t\t\tactionsLayout=\"vertical\"\n\t\t\tonClose={closeDialog}\n\t\t\tactions={[{\n\t\t\t\ttitle: 'Удалить',\n\t\t\t\tfalse: true,\n\t\t\t\tstyle: 'destructive',\n\t\t\t\taction: () => {\n\t\t\t\t\tcloseDialog()\n\t\t\t\t\twindow.history.back()\n\t\t\t\t\tdispatch('cards/api/delete', card)\n\t\t\t\t},\n\t\t\t}, {\n\t\t\t\ttitle: 'Отмена',\n\t\t\t\tautoclose: true,\n\t\t\t\tstyle: 'cancel',\n\t\t\t}]}\n\t\t>\n\t\t\t<h2>Подтвердите действие</h2>\n\t\t\t<p>Вы уверены, что хотите<br></br>удалить карту {card.name}?</p>\n\t\t</Alert>)\n\t}\n\n\tconst share = () => {\n\t\tconst link = 'https://vk.com/app7225850#add_name=' + encodeURIComponent(card.name) + '&add_service_id=' + card.serviceId + '&add_number=' + card.number;\n\t\tconsole.log(link)\n\t\tvkconnect.send(\"VKWebAppShare\", { \"link\": link });\n\t}\n\n\tconst copyToClipboard = () => {\n\t\tsetSnackbar(true)\n\t\tvkconnect.send(\"VKWebAppCopyText\", { text: card.number });\n\t}\n\n\treturn (\n\t\t<Panel id={props.id}>\n\t\t\t<PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={() => window.history.back()} >\n\t\t\t\t\t{osName === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\n\t\t\t\t</HeaderButton>}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\ttypeof card !== 'undefined' ? card.name : \"Упс\"\n\t\t\t\t}\n\n\t\t\t</PanelHeader>\n\n\n\t\t\t{\n\t\t\t\ttypeof card !== 'undefined' &&\n\t\t\t\t<div>\n\t\t\t\t\t<Group >\n\n\t\t\t\t\t\t<div className=\"BarcodeContainer\" onClick={copyToClipboard} >\n\t\t\t\t\t\t\t<div className=\"Barcode\">\n\t\t\t\t\t\t\t\t<Barcode value={card.number.toString()} displayValue={true} fontSize={25} height={120} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</Group>\n\n\n\t\t\t\t\t<Footer className=\"unselectable\">Предъявите этот код на кассе магазина</Footer>\n\n\t\t\t\t\t<Div style={{ display: 'flex' }}>\n\t\t\t\t\t\t<Button before={<Icon24Share />} size=\"l\" stretched level=\"secondary\" onClick={share} style={{ marginRight: 8 }}>Поделиться</Button>\n\t\t\t\t\t\t<Button before={<Icon24Delete />} size=\"l\" stretched level=\"destructive\" onClick={showDeleteDialog}>Удалить</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{\n\t\t\t\ttypeof card === 'undefined' &&\n\t\t\t\t<Placeholder\n\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\tТакой карточки нет, либо она была удалена\n\t\t\t\t</Placeholder>\n\n\t\t\t}\n\t\t\t{\n\t\t\t\tsnackbar && <Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => setSnackbar(false)}\n\t\t\t\t>\n\t\t\t\t\tНомер скопирован в буфер обмена\n\t  \t\t\t</Snackbar>\n\t\t\t}\n\n\n\t\t</Panel>\n\t);\n}\n\n\n\nexport default Card;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M80,48H16C7.168,48,0,55.168,0,64v64c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V80h48c8.832,0,16-7.168,16-16 C96,55.168,88.832,48,80,48z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M464,336c-8.832,0-16,7.168-16,16v48h-48c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h64c8.832,0,16-7.168,16-16v-64 C480,343.168,472.832,336,464,336z\"\n})));\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M464,48h-64c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h48v48c0,8.832,7.168,16,16,16c8.832,0,16-7.168,16-16V64 C480,55.168,472.832,48,464,48z\"\n})));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M80,400H32v-48c0-8.832-7.168-16-16-16c-8.832,0-16,7.168-16,16v64c0,8.832,7.168,16,16,16h64c8.832,0,16-7.168,16-16 C96,407.168,88.832,400,80,400z\"\n})));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 64,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 128,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 192,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 256,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 320,\n  y: 112,\n  width: 32,\n  height: 192\n})));\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 384,\n  y: 112,\n  width: 32,\n  height: 256\n})));\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 128,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 192,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"rect\", {\n  x: 320,\n  y: 336,\n  width: 32,\n  height: 32\n})));\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref18 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref19 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref20 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref21 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref22 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref23 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref24 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref25 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref26 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref27 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref28 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref29 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgBarcode = function SvgBarcode(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 480 480\",\n    style: {\n      enableBackground: \"new 0 0 480 480\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17, _ref18, _ref19, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBarcode, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/barcode.6d6249dd.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\n\n\nimport { Panel, PanelHeader, FormLayout, Input, Button, Div, platform, IOS, HeaderButton, Cell, Avatar, Tooltip, ModalCard, ModalRoot } from '@vkontakte/vkui'\n\n\n\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\n\nimport connect from 'storeon/react/connect'\nimport vkconnect from '@vkontakte/vk-connect';\n\nimport { ReactComponent as IconBarcode } from '../img/barcode.svg';\nimport imgBarcode from '../img/barcode_how.png';\n\nimport './Cards.css';\n\n\nclass AddCard extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        let number = props.args.number || '';\n        this.state = {\n            tooltip: props.prefs[\"scan_tooltip_shown\"] !== true,\n            serviceId: props.args.serviceid,\n            name: decodeURIComponent(props.args.name),\n            number: number,\n            error: !this.isValidCard(number),\n            service: null\n        };\n\n    }\n\n    componentDidMount() {\n        fetch(`./data.json`)\n            .then(res => res.json())\n            .then(json => this.setState({\n                service: json.data.all.filter(({ id }) => {\n                    return id === this.state.serviceId\n                })[0]\n            }));\n    }\n\n    onTooltipClose = () => {\n        this.props.dispatch('prefs/set', { key: \"scan_tooltip_shown\", value: true })\n        this.setState({ tooltip: false })\n    }\n\n    onDone = (data) => {\n        this.setState({ number: data.qr_data, error: false })\n    }\n\n    onError = (error) => {\n        //TODO show error\n    }\n\n    onScanClick = (prop) => {\n        const showScanIosTooltip = this.props.prefs[\"scan_ios_tooltip_shown\"] !== true && platform === IOS\n        if (showScanIosTooltip) {\n            this.props.setModal(\n                <ModalRoot activeModal=\"modal\">\n                    <ModalCard\n                        id=\"modal\"\n                        onClose={() => this.props.setModal(null)}\n                        icon={<Avatar type=\"app\" src={imgBarcode} size={72} />}\n                        title=\"Чтобы отсканировать, наведите код на нижнюю часть рамки\"\n                        caption=\"Найдите хорошее освещение\"\n                        actions={[\n                            {\n                                title: 'Больше не показывать',\n                                type: 'secondary',\n                                action: () => {\n                                    this.props.dispatch('prefs/set', { key: \"scan_ios_tooltip_shown\", value: true })\n                                    this.props.setModal(null);\n                                    this.scan(prop);\n                                }\n                            },\n                            {\n                                title: 'Понял',\n                                type: 'primary',\n                                action: () => {\n                                    this.props.setModal(null);\n                                    this.scan(prop);\n                                }\n                            }\n\n                        ]}\n                    />\n                </ModalRoot>)\n        } else {\n            this.scan(prop);\n        }\n\n    }\n\n\n    scan = (prop) => {\n        vkconnect\n            .sendPromise('VKWebAppOpenQR')\n            .then(this.onDone)\n            .catch(this.onError);\n\n    }\n\n\n\n    onAddClick = () => {\n\n        let {\n            name,\n            number\n        } = this.state\n\n        if (this.isValidName(name) && this.isValidCard(number)) {\n            this.setState({ error: false })\n            const serviceId = this.state.serviceId;\n            const uid = this.props.user.uid;\n            this.props.dispatch('cards/api/add', { uid, name, number, serviceId })\n            this.props.goHome();\n        } else {\n            this.setState({ error: true })\n        }\n\n    }\n\n    onChangeText = (e) => {\n        // eslint-disable-next-line\n        const number = e.target.value.trim().substring(0, 24).replace(/[^\\x00-\\x7F]/g, \"\")\n        this.setState({ number, error: !this.isValidCard(number) })\n    }\n\n    isValidName(name) {\n        return name !== '';\n    }\n\n    isValidCard(number) {\n        return number != null && number.match(\"^[\\x00-\\x7F]{6,24}$\");\n    }\n\n    render() {\n        const osname = platform()\n\n        return (\n            <Panel id={this.props.id}>\n                <PanelHeader\n                    left={<HeaderButton onClick={() => this.props.goBack()} >\n                        {osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\n                    </HeaderButton>}\n\n                >\n                    Новая карта\n\n                </PanelHeader>\n\n\n                <Cell\n                    style={{ marginTop: 10 }}\n                    before={\n                        this.state.service != null && this.state.service.logo != null ?\n                            <Avatar type=\"image\" src={process.env.PUBLIC_URL + this.state.service.logo} style={{ background: this.state.service.bgColor }} />\n                            :\n                            <Avatar type=\"image\" ><Icon28Money /></Avatar>\n                    }\n                >\n                    {this.state.name}\n                </Cell>\n\n\n                <FormLayout>\n\n\n                    <div >\n                        <Tooltip text=\"Карту можно отсканировать\"\n                            isShown={this.state.tooltip}\n                            alignX=\"right\"\n                            cornerOffset={-10}\n                            offsetX={-5}\n                            offsetY={5}\n                            onClose={this.onTooltipClose}>\n                            <Input\n                                style={{ paddingRight: 56 }}\n                                autoFocus\n                                status='default'\n                                onChange={this.onChangeText}\n                                value={this.state.number}\n                                type=\"text\"\n                                placeholder='Введите номер карты' />\n                        </Tooltip>\n\n                        <IconBarcode onClick={this.onScanClick} className=\"Scan\" width={30} height={30} fill=\"var(--control_foreground)\" />\n\n\n                    </div>\n\n                </FormLayout>\n\n\n\n                <Div>\n                    <Button\n                        disabled={this.state.error === true}\n                        size='xl'\n                        onClick={(e) => this.onAddClick(e)}>\n                        Создать\n                    </Button>\n                </Div>\n\n            </Panel>\n        );\n    }\n\n\n}\n\nexport default connect('cards', \"prefs\", AddCard)","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, HeaderButton, IOS, platform, Cell, PanelHeader, Search, Avatar, Spinner, Header } from\n    '@vkontakte/vkui'\n\nimport { List as Virtualized, AutoSizer, CellMeasurer, CellMeasurerCache } from \"react-virtualized\";\n\nimport cyrillicToTranslit from 'cyrillic-to-translit-js'\nimport Icon24Back from '@vkontakte/icons/dist/24/back'\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back'\nimport Icon28Money from '@vkontakte/icons/dist/28/money_transfer'\n\n\nimport './Cards.css';\n\n\n\nconst osname = platform();\n\nclass Services extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { search: '', services: [], popular: [] };\n        this.onChange = this.onChange.bind(this);\n\n        this.cache = new CellMeasurerCache({\n            fixedWidth: true,\n            defaultHeight: 100\n        });\n    }\n\n    onChange(search) {\n        this.setState({ search: search.substring(0, 40) });\n    }\n\n    matchSearch(keyword, search) {\n        return keyword.toLowerCase().indexOf(search) > -1;\n    }\n\n    get services() {\n        const search = this.state.search.toLowerCase().trim();\n        const searchTranslit = cyrillicToTranslit().transform(search);\n        const filtered = this.state.services.filter((service) => {\n\n            return this.matchSearch(service.name, search) || this.matchSearch(service.name, searchTranslit) || (service.keywords != null && service.keywords.filter((keyword) => {\n                return this.matchSearch(keyword, search) || this.matchSearch(keyword, searchTranslit)\n            }).length > 0);\n        }).map((service) => {\n            return service\n        });\n\n        if (search.length > 0) {\n            filtered.unshift({\n                id: null,\n                logo: null,\n                name: search\n            });\n        }\n\n        return filtered.map((service) => {\n            service.name = service.name.charAt(0).toUpperCase() + service.name.slice(1);\n            return service\n        });\n    }\n\n\n    componentDidMount() {\n        fetch(`./data.json`)\n            .then(res => res.json())\n            .then(json =>\n                this.setState({\n                    services: json.data.all, popular: null\n                })\n            );\n    }\n\n\n    renderHeader() {\n        return (\n            <div>\n                <Header level=\"secondary\">Популярное</Header>\n                {this.state.popular.map((service) => this.renderCard(service))}\n                <Header level=\"secondary\">Все</Header>\n            </div>\n        )\n    }\n\n\n    renderRow(index, key, style, parent) {\n        var card = this.services[index];\n        return (\n            <CellMeasurer\n                key={key}\n                cache={this.cache}\n                parent={parent}\n                columnIndex={0}\n                rowIndex={index}>\n                <div key={key} style={style} >\n                    {/* {index === 0 && this.state.search.length == 0 && this.renderHeader()} */}\n                    {this.renderCard(card)}\n                </div>\n            </CellMeasurer>\n        )\n    }\n\n    renderCard(card) {\n        return (\n            <Cell\n                before={\n                    typeof card.logo !== 'undefined' && card.logo != null ?\n                        <Avatar type=\"image\" src={process.env.PUBLIC_URL + card.logo} style={{ background: card.bgColor }} />\n                        :\n                        <Avatar type=\"image\" ><Icon28Money /></Avatar>\n                }\n\n                expandable\n                removable={false}\n                key={card.id}\n                onClick={() => {\n                    this.props.goToPage('add', { name: card.name, serviceid: card.id })\n                }}\n            >\n                {card.name}\n            </Cell>\n        )\n    }\n\n\n    goBack() {\n        window.history.back()\n    }\n\n    render() {\n        let {\n            id,\n        } = this.props\n\n        return (\n            <Panel id={id}>\n\n                <PanelHeader\n                    left={<HeaderButton onClick={this.goBack} >{osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}</HeaderButton>}\n                >\n\n                    <Search\n                        theme=\"header\"\n                        style={{ paddingRight: osname === IOS ? 0 : 56 }}\n                        value={this.state.search}\n                        onChange={this.onChange}\n                        onClose={this.goBack}\n                    />\n\n                </PanelHeader>\n\n                {\n                    this.state.services.length === 0 &&\n                    <Spinner size=\"medium\" style={{ marginTop: 20 }} />\n                }\n\n\n\n                <AutoSizer>\n                    {({ height, width }) => (\n\n\n                        <Virtualized\n\n                            width={width}\n                            height={height}\n                            deferredMeasurementCache={this.cache}\n                            rowHeight={this.cache.rowHeight}\n                            rowRenderer={({ index, key, style, parent }) => this.renderRow(index, key, style, parent)}\n                            rowCount={this.services.length}\n                            overscanRowCount={3} >\n\n                        </Virtualized>\n\n\n                    )}\n\n                </AutoSizer>\n\n\n            </Panel>\n        );\n    }\n}\n\n\nServices.propTypes = {\n    id: PropTypes.string.isRequired,\n\n};\n\nexport default Services","\nimport firebase from 'firebase/app';\nimport 'firebase/analytics';\nimport 'firebase/auth'\nimport 'firebase/firestore';\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCfEuUvuiEzVpUHg46vyWGPSISl4iyb2Mg\",\n    authDomain: \"bonuscards-42f7a.firebaseapp.com\",\n    databaseURL: \"https://bonuscards-42f7a.firebaseio.com\",\n    projectId: \"bonuscards-42f7a\",\n    storageBucket: \"bonuscards-42f7a.appspot.com\",\n    messagingSenderId: \"774318858298\",\n    appId: \"1:774318858298:web:0dc82b27bebdd8f1849503\",\n    measurementId: \"G-HS7VBZ98KJ\"\n};\n// Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig)\n\n\n\nfirebase.auth().onIdTokenChanged((token)=>console.log(\"onIdTokenChanged\"))\n\nfirebase.analytics();\n\nexport default firebase;","import React, { useState, useEffect, useRef } from 'react';\nimport connect from 'storeon/react/connect'\n\nimport { View, Root, Panel, Spinner, Footer, FixedLayout, Placeholder, PanelHeader, ConfigProvider } from '@vkontakte/vkui'\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './panels/Home';\nimport Card from './panels/Card';\nimport vkconnect from '@vkontakte/vk-connect';\nimport AddCard from './panels/AddCard';\nimport Services from './panels/Services';\nimport firebase from './firebase'\n\n\nimport packageJson from './package.alias.json';\n\n\nconst App = (props) => {\n\n\tconst [activePanel, setActivePanel] = useState({ name: \"home\", args: {} });\n\tconst [history, setHistory] = useState([{ name: \"home\", args: {} }]);\n\n\n\tconst [popout, setPopout] = useState(null);\n\tconst [modal, setModal] = useState(null);\n\tconst [user, setUser] = useState(null);\n\tconst [error, setError] = useState(null);\n\n\tconst poputRef = useRef(popout);\n\n\tconst parseQueryString = (string) => {\n\t\treturn string.slice(1).split('&')\n\t\t\t.map((queryParam) => {\n\t\t\t\tlet kvp = queryParam.split('=');\n\t\t\t\treturn { key: kvp[0], value: kvp[1] }\n\t\t\t})\n\t\t\t.reduce((query, kvp) => {\n\t\t\t\tquery[kvp.key] = kvp.value;\n\t\t\t\treturn query\n\t\t\t}, {})\n\t};\n\n\tconst goBack = () => {\n\n\t\tif (poputRef.current != null) {\n\t\t\tsetPopout(null)\n\t\t} else if (history.length === 1) {\n\t\t\tvkconnect.send(\"VKWebAppClose\");\n\t\t} else if (history.length > 1) {\n\t\t\thistory.pop()\n\t\t\tsetActivePanel(history[history.length - 1])\n\t\t\tconsole.log(\"setActivePanel\"+history[history.length - 1].name)\n\t\t}\n\t}\n\n\tconst goHome = () => {\n\t\thistory.length = 0;\n\t\thistory.push({ name: \"home\", args: {} })\n\t\t\n\t\tsetActivePanel({ name: \"home\", args: {} });\n\t\t\n\t\t\n\t}\n\n\tconst goToPage = (page, args) => {\n\t\twindow.history.pushState(args, page)\n\t\thistory.push({ name: page, args: args || {} })\n\t\t\n\t\tsetActivePanel({ name: page, args: args || {} });\n\t\n\t};\n\n\tuseEffect(() => {\n\t\tpoputRef.current = popout;\n\t}, [popout])\n\n\n\tuseEffect(() => {\n\n\t\twindow.addEventListener('popstate', e => { e.preventDefault(); goBack(e) });\n\n\t\tconst authorise = async function () {\n\n\t\t\tconst response = await fetch(\"https://europe-west2-bonuscards-42f7a.cloudfunctions.net/token\" + props.search)\n\n\t\t\tconst json = await response.json();\n\t\t\tconsole.log(\"params checked\");\n\n\n\t\t\tawait firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n\n\t\t\tconsole.log(\"signInWithCustomToken\");\n\t\t\tawait firebase.auth().signInWithCustomToken(json.token);\n\n\t\t}\n\n\t\tconst onUser = function (user) {\n\n\t\t\tsetUser(user);\n\n\t\t\tprops.dispatch('cards/listen', { uid: user.uid })\n\n\t\t\tconst hashParams = parseQueryString(props.hash)\n\t\t\tif (hashParams.add_number != null && hashParams.add_name != null) {\n\t\t\t\tgoToPage('add', { name: hashParams.add_name, number: hashParams.add_number, serviceid: hashParams.add_service_id })\n\t\t\t}\n\t\t}\n\n\n\n\t\tif (firebase.auth().currentUser != null) {\n\t\t\tonUser(firebase.auth().currentUser)\n\t\t} else {\n\t\t\tfirebase.auth().onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\tonUser(user)\n\t\t\t\t} else {\n\t\t\t\t\tauthorise().catch((error) => {\n\t\t\t\t\t\tsetError(error);\n\t\t\t\t\t\tconsole.log(\"auth error:\" + error)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}, (error) => {\n\t\t\t\tconsole.log(error)\n\t\t\t});\n\n\t\t}\n\n\t\tvkconnect.subscribe((e) => {\n\t\t\tif (e.detail.type === \"VKWebAppViewRestore\") {\n\t\t\t\tlet user = firebase.auth().currentUser;\n\t\t\t\tif (user) {\n\t\t\t\t\tonUser(user);\n\t\t\t\t}\n\t\t\t} else if (e.detail.type === \"VKWebAppViewHide\") {\n\t\t\t\tconsole.log(\"terminate\")\n\t\t\t\tfirebase.firestore().terminate();\n\n\t\t\t}\n\t\t});\n\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\n\treturn (\n\t\t\n\t\t<ConfigProvider isWebView={true}>\n\t\t\t<Root activeView={error != null ? \"error\" : props.cards.loading === true ? \"splash\" : \"main\"}>\n\t\t\t\t<View id=\"splash\" activePanel=\"splash\">\n\t\t\t\t\t<Panel id=\"splash\">\n\n\n\t\t\t\t\t\t<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '75vh' }}>\n\n\t\t\t\t\t\t\t<Spinner size=\"large\" />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<FixedLayout vertical='bottom'>\n\n\t\t\t\t\t\t\t<Footer className=\"unselectable\">{packageJson.version}</Footer>\n\t\t\t\t\t\t</FixedLayout>\n\t\t\t\t\t</Panel>\n\n\t\t\t\t</View>\n\n\t\t\t\t<View id=\"error\" activePanel=\"error\">\n\t\t\t\t\t<Panel id=\"error\">\n\t\t\t\t\t\t<PanelHeader >Бонус карты</PanelHeader>\n\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\ticon={<Icon56InfoOutline />}>\n\t\t\t\t\t\t\tПроизошла ошибка, попробуйте еще раз\n\t\t\t\t\t</Placeholder>\n\t\t\t\t\t</Panel>\n\n\t\t\t\t</View>\n\n\t\t\t\t<View id=\"main\" activePanel={activePanel.name} popout={popout} modal={modal} onSwipeBack={goBack}>\n\t\t\t\t\t<Home id='home' goToPage={goToPage} user={user} args={activePanel.args} />\n\t\t\t\t\t<Card id='card' goToPage={goToPage} goBack={goBack} setPopout={setPopout} args={activePanel.args} />\n\t\t\t\t\t<Services id='services' goToPage={goToPage} goBack={goBack} args={activePanel.args} />\n\t\t\t\t\t<AddCard id='add' goToPage={goToPage} goBack={goBack} goHome={goHome} args={activePanel.args} user={user} setModal={setModal} />\n\n\t\t\t\t</View>\n\n\n\t\t\t</Root>\n\n\n\n\t\t</ConfigProvider>\n\n\t)\n\n}\n\nexport default connect('cards', App)\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\nimport createStore from 'storeon'\nimport persistState from '@storeon/localstorage'\nimport cards from './cards'\nimport prefs from './prefs'\nimport StoreContext from 'storeon/react/context'\n//import registerServiceWorker from './sw';\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n//registerServiceWorker();\n\n\nconnect.subscribe((e) => {\n    console.log(e.detail.type);\n    switch (e.detail.type) {\n        case 'VKWebAppUpdateConfig':\n            let schemeAttribute = document.createAttribute('scheme');\n            schemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'client_light';\n            document.body.attributes.setNamedItem(schemeAttribute);\n            break;\n        default:\n            console.log(e.detail.type);\n    }\n });\n\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\nconst store = createStore([cards, prefs, persistState(['prefs']),])\n\n\n\nconst search = window.location.search\nconst hash = window.location.hash\n\n\nReactDOM.render(<StoreContext.Provider value={store}><App  search={search} hash={hash} /></StoreContext.Provider>, document.getElementById('root'));\n// ReactDOM.render((\n//         <StoreContext.Provider value={store}>\n//             <App  search={search} hash={hash} />\n//         </StoreContext.Provider>), document.getElementById('root'))\n\n","\nimport firebase from './firebase'\n\nexport default store => {\n\n    store.on('@init', () => ({ cards: { loading: true, data: [] } }))\n\n    store.on('cards/save', ({ cards }, { cardsToSave }) => {\n        cards.data = cardsToSave;\n        cards.loading = false;\n        console.log(\"update cards\");\n        return { cards: cards }\n    })\n\n\n    store.on('cards/listen', ({ cards }, { uid }) => {\n        const db = firebase.firestore();\n        db.collection('cards').where(\"uid\", \"==\", uid)\n            .onSnapshot({ includeMetadataChanges: true }, function (snapshot) {\n                console.log(snapshot);\n\n                store.dispatch('cards/api/get', uid)\n            })\n    })\n\n    store.on('cards/api/get', ({ cards }, uid) => {\n        const db = firebase.firestore();\n        db.collection('cards').where(\"uid\", \"==\", uid).get().then((snapshot) => {\n            const cardsToSave = snapshot.docs.map((doc) => {\n                return {\n                    docId: doc.id,\n                    uid: doc.data().uid,\n                    id: doc.data().id,\n                    name: doc.data().name,\n                    number: doc.data().number,\n                    serviceId: doc.data().service_id,\n                }\n            })\n            store.dispatch('cards/save', { cardsToSave })\n\n        }).catch((error)=>{\n            console.log(\"error get cards from firebase:\"+error);\n        });\n\n    })\n\n\n    store.on('cards/api/add', ({ cards }, card) => {\n        const db = firebase.firestore();\n        card.id = makeid(20);\n        db.collection('cards').add({\n            uid: card.uid,\n            id: card.id,\n            name: card.name,\n            number: card.number,\n            service_id: card.serviceId\n        })\n    })\n\n\n    store.on('cards/api/delete', ({ cards }, card) => {\n        const db = firebase.firestore();\n        db.collection(\"cards\").doc(card.docId).delete();\n    })\n\n    function makeid(length) {\n        var result = '';\n        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        var charactersLength = characters.length;\n        for (var i = 0; i < length; i++) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n        return result;\n    }\n\n}","export default prefs => {\n    prefs.on('@init', () => ({ prefs: {} }))\n\n    prefs.on('prefs/set', ({ prefs }, pref) => {\n        \n        prefs[pref.key] = pref.value;\n        return prefs;\n\n    })\n\n}"],"sourceRoot":""}